(function(a,U){typeof exports=="object"&&typeof module<"u"?U(exports,require("@vueuse/core"),require("vue"),require("clone-deep"),require("md5"),require("is-empty"),require("vue-router"),require("psr7-js"),require("uuid"),require("mitt"),require("uri-templates")):typeof define=="function"&&define.amd?define(["exports","@vueuse/core","vue","clone-deep","md5","is-empty","vue-router","psr7-js","uuid","mitt","uri-templates"],U):(a=typeof globalThis<"u"?globalThis:a||self,U(a.Speculoos={},a.core,a.Vue,a.clone$1,a.md5,a.empty,a.vueRouter,a.psr7Js,a.uuid,a.mitt,a.uriTemplate))})(this,function(a,U,c,$t,Zt,V,ut,Z,Bt,Wt,Jt){"use strict";var Ne=Object.defineProperty;var Ve=(a,U,c)=>U in a?Ne(a,U,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[U]=c;var y=(a,U,c)=>(Ve(a,typeof U!="symbol"?U+"":U,c),c);class wt extends Error{constructor(t){super(t.statusText),this.response=t,this.statusCode=parseInt(this.response.status)}isStatusCode(t){const e=r=>parseInt(r)===this.statusCode;for(let r of arguments)if(e(r))return!0;return!1}isClientError(){return this.statusCode>=400&&this.statusCode<500}isServerError(){return this.statusCode>500}static guard(t){if(t.status>=400)throw new this(t);return t}}class vt extends Error{constructor(t){super(),this.name="AbortError",this.reason=t}}const ct=n=>{if(!(n instanceof Headers))return n;const t={};for(let e of n.keys())t[e]=n.get(e);return t},Gt={Accept:"application/ld+json, application/json"},St=async n=>{try{const t=await n.text();try{n.data=JSON.parse(t),n.json=()=>new Promise(e=>e(n.data))}catch{n.data=t,n.json=()=>new Promise(r=>r(n.data))}}catch{}return n};class Kt{constructor({baseUri:t="",options:e={},fetcher:r}={}){y(this,"baseUri");y(this,"options");y(this,"fetch");var s;this.baseUri=t,this.options=e,r=r??((s=window.fetch)==null?void 0:s.bind(window)),this.fetch=async(i,u)=>r(i,u).then(St)}resolve(t){return new URL(t,this.baseUri).toString()}mergeOptions(t){let e={...this.options};Object.keys(e).includes("headers")&&(e.headers=ct(e.headers));for(let r of arguments){let s={...r};Object.keys(s).includes("headers")&&(s.headers={...ct(s.headers)}),e={...$t(e),...$t(s)}}return e}async request(t,e,r){e=`${c.unref(e)}`,r=this.mergeOptions({method:t},r),Object.keys(r).includes("headers")&&(r.headers=new Headers({...Gt,...ct(r.headers)}));try{if(c.isRef(r==null?void 0:r.isLoading)&&(r.isLoading.value=!0),c.isRef(r==null?void 0:r.aborted)){const s=new AbortController,{signal:i}=s;r.signal=i,U.whenever(r.aborted,()=>s.abort(),{immediate:!0})}try{const s=await this.fetch(e,r);return wt.guard(s)}catch(s){throw s.name==="AbortError"?new vt(s.reason):s}}finally{c.isRef(r==null?void 0:r.isLoading)&&(r.isLoading.value=!1)}}async get(t,e={}){return await this.request("GET",this.resolve(t),this.mergeOptions(e))}async post(t,e,r={}){return await this.request("POST",this.resolve(t),this.mergeOptions({body:JSON.stringify(c.unref(e)),headers:{"Content-Type":"application/json"}},r))}async put(t,e,r={}){return await this.request("PUT",this.resolve(t),this.mergeOptions({body:JSON.stringify(c.unref(e)),headers:{"Content-Type":"application/json"}},r))}async delete(t,e={}){return await this.request("DELETE",this.resolve(t),this.mergeOptions(e))}}class Xt{constructor(t=(e=>(e=window.fetch)==null?void 0:e.bind(window))()){y(this,"fetch");y(this,"pendingRequests",[]);return this.fetch=t,(r,s)=>{try{const i=Zt(JSON.stringify({url:r,...s})),u=this.pendingRequests.findIndex(m=>i===m.hash);if(u>=0)return this.pendingRequests[u].promise;const h=this.fetch(r,s).then(St);return this.pendingRequests.push({hash:i,promise:h}),h.then(m=>(this.removePendingRequest(i),m),m=>{throw this.removePendingRequest(i),m})}catch{return this.fetch(r,s)}}}removePendingRequest(t){const e=this.pendingRequests.findIndex(r=>t===r.hash);e>=0&&this.pendingRequests.splice(e,1)}}function te(n=void 0){return new Xt(n)}const K=(n,t=!0,e=[])=>{if(typeof n!="object"||n==null)return n;const r=e.find(i=>i.orig===n);if(r!=null)return r.cloned;let s=Object.assign(Object.create(Object.getPrototypeOf(n)),n);if(Array.isArray(n)&&(s=Object.values(s)),e.push({orig:n,cloned:s}),t)for(const i in s)typeof s[i]=="object"&&s[i]!=null&&(s[i]=K(s[i],t,e));return"__clone"in s&&typeof s.__clone=="function"&&s.__clone(),s};class Q{normalize(){throw Error("This method is meant to be overriden.")}async denormalize(t){throw Error("This method is meant to be overriden.")}}class ee extends Q{constructor(e=[]){super();y(this,"values");this.values=e}normalize(){return this.values}async denormalize(e){if(typeof e=="string"&&(e=e.trim()),[void 0,null,""].includes(e)){this.values=[];return}Array.isArray(e)||(e=[e]),this.values=e}}var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Y={},re={get exports(){return Y},set exports(n){Y=n}};(function(n,t){(function(e,r){n.exports=r()})(ft,function(){var e=1e3,r=6e4,s=36e5,i="millisecond",u="second",h="minute",m="hour",v="day",j="week",H="month",O="quarter",D="year",I="date",l="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function($,d,o){var g=String($);return!g||g.length>=d?$:""+Array(d+1-g.length).join(o)+$},k={s:E,z:function($){var d=-$.utcOffset(),o=Math.abs(d),g=Math.floor(o/60),f=o%60;return(d<=0?"+":"-")+E(g,2,"0")+":"+E(f,2,"0")},m:function $(d,o){if(d.date()<o.date())return-$(o,d);var g=12*(o.year()-d.year())+(o.month()-d.month()),f=d.clone().add(g,H),b=o-f<0,p=d.clone().add(g+(b?-1:1),H);return+(-(g+(o-f)/(b?f-p:p-f))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:H,y:D,w:j,d:v,D:I,h:m,m:h,s:u,ms:i,Q:O}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},C="en",F={};F[C]=M;var L=function($){return $ instanceof W},N=function $(d,o,g){var f;if(!d)return C;if(typeof d=="string"){var b=d.toLowerCase();F[b]&&(f=b),o&&(F[b]=o,f=b);var p=d.split("-");if(!f&&p.length>1)return $(p[0])}else{var S=d.name;F[S]=d,f=S}return!g&&f&&(C=f),f||!g&&C},z=function($,d){if(L($))return $.clone();var o=typeof d=="object"?d:{};return o.date=$,o.args=arguments,new W(o)},w=k;w.l=N,w.i=L,w.w=function($,d){return z($,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var W=function(){function $(o){this.$L=N(o.locale,null,!0),this.parse(o)}var d=$.prototype;return d.parse=function(o){this.$d=function(g){var f=g.date,b=g.utc;if(f===null)return new Date(NaN);if(w.u(f))return new Date;if(f instanceof Date)return new Date(f);if(typeof f=="string"&&!/Z$/i.test(f)){var p=f.match(T);if(p){var S=p[2]-1||0,A=(p[7]||"0").substring(0,3);return b?new Date(Date.UTC(p[1],S,p[3]||1,p[4]||0,p[5]||0,p[6]||0,A)):new Date(p[1],S,p[3]||1,p[4]||0,p[5]||0,p[6]||0,A)}}return new Date(f)}(o),this.$x=o.x||{},this.init()},d.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},d.$utils=function(){return w},d.isValid=function(){return this.$d.toString()!==l},d.isSame=function(o,g){var f=z(o);return this.startOf(g)<=f&&f<=this.endOf(g)},d.isAfter=function(o,g){return z(o)<this.startOf(g)},d.isBefore=function(o,g){return this.endOf(g)<z(o)},d.$g=function(o,g,f){return w.u(o)?this[g]:this.set(f,o)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(o,g){var f=this,b=!!w.u(g)||g,p=w.p(o),S=function(tt,q){var G=w.w(f.$u?Date.UTC(f.$y,q,tt):new Date(f.$y,q,tt),f);return b?G:G.endOf(v)},A=function(tt,q){return w.w(f.toDate()[tt].apply(f.toDate("s"),(b?[0,0,0,0]:[23,59,59,999]).slice(q)),f)},P=this.$W,x=this.$M,J=this.$D,B="set"+(this.$u?"UTC":"");switch(p){case D:return b?S(1,0):S(31,11);case H:return b?S(1,x):S(0,x+1);case j:var rt=this.$locale().weekStart||0,nt=(P<rt?P+7:P)-rt;return S(b?J-nt:J+(6-nt),x);case v:case I:return A(B+"Hours",0);case m:return A(B+"Minutes",1);case h:return A(B+"Seconds",2);case u:return A(B+"Milliseconds",3);default:return this.clone()}},d.endOf=function(o){return this.startOf(o,!1)},d.$set=function(o,g){var f,b=w.p(o),p="set"+(this.$u?"UTC":""),S=(f={},f[v]=p+"Date",f[I]=p+"Date",f[H]=p+"Month",f[D]=p+"FullYear",f[m]=p+"Hours",f[h]=p+"Minutes",f[u]=p+"Seconds",f[i]=p+"Milliseconds",f)[b],A=b===v?this.$D+(g-this.$W):g;if(b===H||b===D){var P=this.clone().set(I,1);P.$d[S](A),P.init(),this.$d=P.set(I,Math.min(this.$D,P.daysInMonth())).$d}else S&&this.$d[S](A);return this.init(),this},d.set=function(o,g){return this.clone().$set(o,g)},d.get=function(o){return this[w.p(o)]()},d.add=function(o,g){var f,b=this;o=Number(o);var p=w.p(g),S=function(x){var J=z(b);return w.w(J.date(J.date()+Math.round(x*o)),b)};if(p===H)return this.set(H,this.$M+o);if(p===D)return this.set(D,this.$y+o);if(p===v)return S(1);if(p===j)return S(7);var A=(f={},f[h]=r,f[m]=s,f[u]=e,f)[p]||1,P=this.$d.getTime()+o*A;return w.w(P,this)},d.subtract=function(o,g){return this.add(-1*o,g)},d.format=function(o){var g=this,f=this.$locale();if(!this.isValid())return f.invalidDate||l;var b=o||"YYYY-MM-DDTHH:mm:ssZ",p=w.z(this),S=this.$H,A=this.$m,P=this.$M,x=f.weekdays,J=f.months,B=function(q,G,bt,ot){return q&&(q[G]||q(g,b))||bt[G].slice(0,ot)},rt=function(q){return w.s(S%12||12,q,"0")},nt=f.meridiem||function(q,G,bt){var ot=q<12?"AM":"PM";return bt?ot.toLowerCase():ot},tt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:P+1,MM:w.s(P+1,2,"0"),MMM:B(f.monthsShort,P,J,3),MMMM:B(J,P),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:B(f.weekdaysMin,this.$W,x,2),ddd:B(f.weekdaysShort,this.$W,x,3),dddd:x[this.$W],H:String(S),HH:w.s(S,2,"0"),h:rt(1),hh:rt(2),a:nt(S,A,!0),A:nt(S,A,!1),m:String(A),mm:w.s(A,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:p};return b.replace(_,function(q,G){return G||tt[q]||p.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(o,g,f){var b,p=w.p(g),S=z(o),A=(S.utcOffset()-this.utcOffset())*r,P=this-S,x=w.m(this,S);return x=(b={},b[D]=x/12,b[H]=x,b[O]=x/3,b[j]=(P-A)/6048e5,b[v]=(P-A)/864e5,b[m]=P/s,b[h]=P/r,b[u]=P/e,b)[p]||P,f?x:w.a(x)},d.daysInMonth=function(){return this.endOf(H).$D},d.$locale=function(){return F[this.$L]},d.locale=function(o,g){if(!o)return this.$L;var f=this.clone(),b=N(o,g,!0);return b&&(f.$L=b),f},d.clone=function(){return w.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},$}(),Qt=W.prototype;return z.prototype=Qt,[["$ms",i],["$s",u],["$m",h],["$H",m],["$W",v],["$M",H],["$y",D],["$D",I]].forEach(function($){Qt[$[1]]=function(d){return this.$g(d,$[0],$[1])}}),z.extend=function($,d){return $.$i||($(d,W,z),$.$i=!0),z},z.locale=N,z.isDayjs=L,z.unix=function($){return z(1e3*$)},z.en=F[C],z.Ls=F,z.p={},z})})(re);var ht={},ne={get exports(){return ht},set exports(n){ht=n}};(function(n,t){(function(e,r){n.exports=r()})(ft,function(){var e="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(i,u,h){var m=u.prototype;h.utc=function(l){var T={date:l,utc:!0,args:arguments};return new u(T)},m.utc=function(l){var T=h(this.toDate(),{locale:this.$L,utc:!0});return l?T.add(this.utcOffset(),e):T},m.local=function(){return h(this.toDate(),{locale:this.$L,utc:!1})};var v=m.parse;m.parse=function(l){l.utc&&(this.$u=!0),this.$utils().u(l.$offset)||(this.$offset=l.$offset),v.call(this,l)};var j=m.init;m.init=function(){if(this.$u){var l=this.$d;this.$y=l.getUTCFullYear(),this.$M=l.getUTCMonth(),this.$D=l.getUTCDate(),this.$W=l.getUTCDay(),this.$H=l.getUTCHours(),this.$m=l.getUTCMinutes(),this.$s=l.getUTCSeconds(),this.$ms=l.getUTCMilliseconds()}else j.call(this)};var H=m.utcOffset;m.utcOffset=function(l,T){var _=this.$utils().u;if(_(l))return this.$u?0:_(this.$offset)?H.call(this):this.$offset;if(typeof l=="string"&&(l=function(C){C===void 0&&(C="");var F=C.match(r);if(!F)return null;var L=(""+F[0]).match(s)||["-",0,0],N=L[0],z=60*+L[1]+ +L[2];return z===0?0:N==="+"?z:-z}(l),l===null))return this;var M=Math.abs(l)<=16?60*l:l,E=this;if(T)return E.$offset=M,E.$u=l===0,E;if(l!==0){var k=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(M+k,e)).$offset=M,E.$x.$localOffset=k}else E=this.utc();return E};var O=m.format;m.format=function(l){var T=l||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return O.call(this,T)},m.valueOf=function(){var l=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*l},m.isUTC=function(){return!!this.$u},m.toISOString=function(){return this.toDate().toISOString()},m.toString=function(){return this.toDate().toUTCString()};var D=m.toDate;m.toDate=function(l){return l==="s"&&this.$offset?h(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():D.call(this)};var I=m.diff;m.diff=function(l,T,_){if(l&&this.$u===l.$u)return I.call(this,l,T,_);var M=this.local(),E=h(l).local();return I.call(M,E,T,_)}}})})(ne);const Tt=ht;var lt={},se={get exports(){return lt},set exports(n){lt=n}};(function(n,t){(function(e,r){n.exports=r()})(ft,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(s,i,u){var h,m=function(O,D,I){I===void 0&&(I={});var l=new Date(O),T=function(_,M){M===void 0&&(M={});var E=M.timeZoneName||"short",k=_+"|"+E,C=r[k];return C||(C=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:_,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:E}),r[k]=C),C}(D,I);return T.formatToParts(l)},v=function(O,D){for(var I=m(O,D),l=[],T=0;T<I.length;T+=1){var _=I[T],M=_.type,E=_.value,k=e[M];k>=0&&(l[k]=parseInt(E,10))}var C=l[3],F=C===24?0:C,L=l[0]+"-"+l[1]+"-"+l[2]+" "+F+":"+l[4]+":"+l[5]+":000",N=+O;return(u.utc(L).valueOf()-(N-=N%1e3))/6e4},j=i.prototype;j.tz=function(O,D){O===void 0&&(O=h);var I=this.utcOffset(),l=this.toDate(),T=l.toLocaleString("en-US",{timeZone:O}),_=Math.round((l-new Date(T))/1e3/60),M=u(T).$set("millisecond",this.$ms).utcOffset(15*-Math.round(l.getTimezoneOffset()/15)-_,!0);if(D){var E=M.utcOffset();M=M.add(I-E,"minute")}return M.$x.$timezone=O,M},j.offsetName=function(O){var D=this.$x.$timezone||u.tz.guess(),I=m(this.valueOf(),D,{timeZoneName:O}).find(function(l){return l.type.toLowerCase()==="timezonename"});return I&&I.value};var H=j.startOf;j.startOf=function(O,D){if(!this.$x||!this.$x.$timezone)return H.call(this,O,D);var I=u(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return H.call(I,O,D).tz(this.$x.$timezone,!0)},u.tz=function(O,D,I){var l=I&&D,T=I||D||h,_=v(+u(),T);if(typeof O!="string")return u(O).tz(T);var M=function(F,L,N){var z=F-60*L*1e3,w=v(z,N);if(L===w)return[z,L];var W=v(z-=60*(w-L)*1e3,N);return w===W?[z,w]:[F-60*Math.min(w,W)*1e3,Math.max(w,W)]}(u.utc(O,l).valueOf(),_,T),E=M[0],k=M[1],C=u(E).utcOffset(k);return C.$x.$timezone=T,C},u.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},u.tz.setDefault=function(O){h=O}}})})(se);const zt=lt;Y.extend(Tt),Y.extend(zt);class It extends Q{constructor({after:e=null,before:r=null}={},{withTime:s=!0,useUserTimezone:i=!0}={}){super();y(this,"after");y(this,"before");y(this,"normalizedFormat");y(this,"useUserTimezone");this.after=e,this.before=r,this.normalizedFormat=s?"YYYY-MM-DD[T]HH:mm:ss[Z]":"YYYY-MM-DD",this.useUserTimezone=i}normalize(){this.constructor.ensureTimezoneIsSet();const e=this.useUserTimezone?this.constructor.userTimezone:"UTC";let r=null,s=null;return V(this.after)||(r=Y.tz(this.after,e).hour(0).minute(0).second(0).tz("UTC").format(this.normalizedFormat)),V(this.before)||(s=Y.tz(this.before,e).hour(0).minute(0).second(0).add(1,"day").subtract(1,"second").tz("UTC").format(this.normalizedFormat)),{after:r,before:s}}async denormalize(e){this.constructor.ensureTimezoneIsSet(),this.after=null,this.before=null,V(e.after)||(this.after=this.useUserTimezone?Y.tz(e.after,"UTC").tz(this.constructor.userTimezone):Y.tz(e.after,"UTC"),this.after=this.after.hour(0).minute(0).second(0).format("YYYY-MM-DD")),V(e.before)||(this.before=this.useUserTimezone?Y.tz(e.before,"UTC").tz(this.constructor.userTimezone):Y.tz(e.before,"UTC"),this.before=this.before.hour(0).minute(0).second(0).add(1,"day").subtract(1,"second").format("YYYY-MM-DD"))}static ensureTimezoneIsSet(){this.constructor.userTimezone=this.constructor.userTimezone??(Y.tz.guess()||"UTC")}}y(It,"userTimezone"),Y.extend(Tt),Y.extend(zt);class Ot extends Q{constructor({after:e=null,before:r=null}={}){super();y(this,"after");y(this,"before");this.after=e,this.before=r}normalize(){this.constructor.ensureTimezoneIsSet();let e=null,r=null;return V(this.after)||(e=Y.tz(this.after,this.constructor.userTimezone).tz("UTC").format("YYYY-MM-DD[T]HH:mm:ss[Z]")),V(this.before)||(r=Y.tz(this.before,this.constructor.userTimezone).tz("UTC").format("YYYY-MM-DD[T]HH:mm:ss[Z]")),{after:e,before:r}}async denormalize(e){this.constructor.ensureTimezoneIsSet(),this.after=null,this.before=null,V(e.after)||(this.after=Y.tz(e.after,"UTC").tz(this.constructor.userTimezone).format("YYYY-MM-DD[T]HH:mm:ss[Z]")),V(e.before)||(this.before=Y.tz(e.before,"UTC").tz(this.constructor.userTimezone).format("YYYY-MM-DD[T]HH:mm:ss[Z]"))}static ensureTimezoneIsSet(){this.constructor.userTimezone=this.constructor.userTimezone??(Y.tz.guess()||"UTC")}}y(Ot,"userTimezone");function ie(n){return n==null?!0:typeof n=="string"?n.trim().length===0:typeof n=="function"||Array.isArray(n)?n.length===0:n instanceof Object?Object.keys(n).length===0:!1}function dt(n){if(!(n instanceof Object))return n;if(Array.isArray(n))return n.map(dt);const t={...n};return Object.keys(t).forEach(e=>{t[e]instanceof Object&&(t[e]=dt(t[e])),ie(t[e])&&delete t[e]}),t}class ae{constructor(t={}){y(this,"_filters",[]);if(!(t instanceof Object))throw Error("A FilterCollection expects an object.");Object.keys(t).forEach(e=>{if(!(t[e]instanceof Q))throw Error(`Filter ${e} doesn't extend the Filter class.`);this[e]=t[e],this._filters.push(e)})}normalize(){const t={};return this._filters.forEach(e=>{const r=this[e];t[e]=r.normalize()}),dt(t)}async denormalize(t){const e=[];for(const r of this._filters){const s=this[r];s instanceof Q&&typeof t[r]<"u"&&e.push(s.denormalize(t[r]))}return e.length>0&&await Promise.all(e),this}}async function oe(n={},t={preserveQuery:!1,targetRoute:void 0}){if(typeof n!="function")throw Error("initialState should be provided as a function.");const e=ut.useRoute(),r=ut.useRouter(),s=c.ref(n());async function i(v){Object.assign(c.unref(s),await c.unref(s).denormalize(v.query))}function u(){s.value=K(n())}function h(v={}){const j={};return t.preserveQuery===!0&&Object.assign(j,e.query),Object.assign(j,c.unref(s).normalize(),v)}async function m(v={}){const j=c.unref(t.targetRoute)??e;await r.push(Object.assign({...j},{query:h(v)}))}return ut.onBeforeRouteUpdate(v=>i(v)),await i(e),{filters:s,buildQueryParams:h,submit:m,clear:u}}const ue=async({state:n={},methods:t={},name:e="store"}={})=>{n=c.reactive(n);const r=[],s={name:e,state:n,...Object.keys(t).reduce(function(i,u){const h=t[u];return i[u]=function(){return h(n,...arguments)},i},{}),async use(i){return r.push(i),await i.install(this),this},async reconciliate(i=!1){const u=r.filter(({reconciliate:h})=>typeof h=="function");if(i===!1)return Promise.all(u.map(h=>h.reconciliate(this)));for(const h of u)await h.reconciliate(this)}};return s.install=i=>i.provide(e,{...s,state:c.readonly(n)}),s},mt=(n="store")=>c.inject(n);class Dt{constructor(t){Object.keys(t).forEach(e=>{this[e]=new st(t[e])})}for(t){if(typeof t=="string"&&Object.keys(this).includes(t))return this[t];if(!Object.keys(this).includes(t["@type"]))throw Error(`Endpoint not found for item ${t["@type"]}.`);return this[t["@type"]]}}class st{constructor(t){y(this,"endpoint");this.endpoint=t}toString(){return this.endpoint}toJSON(){return this.endpoint}buildIri(t){let e=new Z.URI(this.endpoint);return e=e.withPath(`${e.getPath()}/${t}`),e.toString()}withQuery(t){const e=new Z.URI(this.endpoint),r=new Z.QueryString(e).withParams(t);return new st(e.withQuery(r.toString()).toString())}paginated(t,e=!1){t=c.unref(t),e=c.unref(e);const r={pagination:t===!1?0:1,partial:e===!1?void 0:1,itemsPerPage:void 0};return t!==!1&&(r.itemsPerPage=t),this.withQuery(r)}synchronize(t=window.location.href){return this.withQuery(new Z.QueryString(new Z.URI(t)).getParams())}}const ce=(n,t)=>mt(t).state.endpoints[n];function et(n){return n=c.unref(n),n==null?!1:Object.keys(n).includes("@id")&&n["@id"]!=null}function R(n){return n=c.unref(n),n===null?null:typeof n=="string"?n:(it(n),n["@id"])}function Mt(n){const t=R(n);return t.substring(t.lastIndexOf("/")+1)}function fe(n){return n.map(R)}function he(n){return n.map(Mt)}function it(n,t=null){if(typeof n!="object"||!("@id"in n))throw Error("Invalid item.");if(t!==null){if(typeof t=="string"&&t!==n["@type"])throw Error(`Expected item of type "${t}", got "${n["@type"]}".`);if(Array.isArray(t)&&t.includes(n["@type"])===!1)throw Error(`Expected item of any "${t.join("|")}", got "${n["@type"]}".`)}}function X(n,t){return R(n)===R(t)}function Et(n,t){if(n=c.unref(n),n=Array.from(n).map(c.unref),t=c.unref(t),Array.isArray(t)){const e=t;for(const r of e)if(Et(n,r))return!0;return!1}for(const e of n)if(X(e,t))return!0;return!1}function le(n,t){const e=n.findIndex(r=>X(r,t));return e>=0&&n.splice(e,1),n}function at(n,t){const e=n.find(r=>X(r,t));return typeof e>"u"?null:e}function de(n,t){return n.findIndex(e=>X(e,t))}function me(n,t){return n.filter(e=>e["@type"]===t)}function ye(n){Object.assign(n,n.map(t=>R(t)))}function ge(n,t){return n=c.unref(n),it(n),Object.assign({"@id":n["@id"],"@type":n["@type"]},t)}class yt extends Error{constructor(){super(...arguments);y(this,"statusCode")}get title(){return this["hydra:title"]}get description(){return this["hydra:description"]}}class Pt{constructor(){y(this,"id");y(this,"propertyPath");y(this,"message");y(this,"code");this.id=Bt.v4()}}class jt extends yt{constructor(e){super();y(this,"_violations",[]);Object.assign(this,{*[Symbol.iterator](){yield*this.violations}}),Object.assign(this,e)}get violations(){return this._violations}set violations(e){this._violations=e.map(r=>Object.assign(new Pt,r))}getPropertyPaths(){return[...new Set(this.violations.map(({propertyPath:e})=>e))]}getViolations(e){const r=Array.from(arguments);return r.length===0?this.violations:V(r[0])?this.violations.filter(s=>V(s.propertyPath)):this.violations.filter(s=>e===s.propertyPath)}}class Ct{constructor(t={}){Object.assign(this,{...t,*[Symbol.iterator](){yield*this["hydra:member"]||[]}})}get length(){return this.items.length}get totalItems(){return this["hydra:totalItems"]||0}get items(){return this["hydra:member"]||[]}forEach(t){return(this["hydra:member"]||[]).forEach(t)}map(t){return(this["hydra:member"]||[]).map(t)}filter(t){return(this["hydra:member"]||[]).filter(t)}find(t){return(this["hydra:member"]||[]).find(t)}findIndex(t){return(this["hydra:member"]||[]).findIndex(t)}}function pe(n){if(typeof n!="object"||n==null)throw Error("Invalid object.");return Object.keys(n).forEach(t=>delete n[t]),n}function At(n){return et(n)?R(n):n}function Yt(n){const t=K(n),e=Object.keys(t);for(const r of e){const s=t[r];Array.isArray(s)?t[r]=s.map(i=>At(i)):typeof s=="object"&&s!=null&&(t[r]=At(s))}return t}function Ut(n,t){return n=pe(n),Object.assign(n,t)}function be(n){const t=mt(),e=c.ref(c.unref(n)),r=c.reactive(K(c.unref(n))),s=c.computed(()=>!et(c.unref(r))),i=c.ref(!1),u=c.computed(()=>JSON.stringify(c.unref(r))!==JSON.stringify(c.unref(e)));return{item:r,isUnsavedDraft:u,isCreationMode:s,isSubmitting:i,reset:v=>Ut(r,K(c.unref(v??n))),submit:async v=>{c.isRef(v)&&(v=c.unref(v));try{i.value=!0;const j=await t.upsertItem(Yt(v??r));return e.value=j,Ut(r,K(j)),j}finally{i.value=!1}}}}function $e(){const n=c.ref([]),t=i=>{i=c.unref(i),i.querySelectorAll("[name]").forEach(function(u){u.setCustomValidity("")}),n.value=[]},e=(i,u=!0)=>{i=c.unref(i);const h=i.checkValidity();return!h&&u&&i.reportValidity(),h},r=(i,u)=>{t(i),Array.from(u).forEach(h=>s(i,h)),e(i)},s=(i,{propertyPath:u,message:h})=>{i=c.unref(i);const m=i.querySelector(`[name='${u}']`);m==null||m.setCustomValidity(h),m||n.value.push({propertyPath:u,message:h})};return{resetValidity:t,bindViolations:r,unmappedViolations:n,validate:e}}let gt;const we=1,ve=2;class Rt{constructor(t,e){y(this,"readyState",we);y(this,"url");y(this,"withCredentials");this.url=t,this.withCredentials=(e==null?void 0:e.withCredentials)??!1,setTimeout(()=>this.onopen(),10)}onerror(){}onmessage(){}onopen(){}close(){this.readyState=ve}triggerEvent(t){this.onmessage(t)}triggerError(t){this.onerror(t)}}(()=>{var n;return typeof process<"u"&&((n=process==null?void 0:process.env)==null?void 0:n.NODE_ENV)==="test"||"test"===void 0})()?gt=Rt:gt=window.EventSource;const Se=gt,Te=(n,t)=>{const e=new Ht(n,t);return Object.assign(e,{install(r){r.provide("mercure",e)}})},_t=()=>c.inject("mercure");function ze(n,t){return n.length===t.length&&n.every(e=>t.includes(e))}class Ht{constructor(t,e={}){y(this,"hub");y(this,"options");y(this,"connection");y(this,"subscribedTopics");y(this,"endpoint");y(this,"emitter");y(this,"lastEventId");Object.assign(this,{hub:t,options:c.reactive(e)}),this.lastEventId=c.ref(),this.subscribedTopics=c.ref([]),this.endpoint=c.computed(()=>{const r=new URL(this.hub),s=c.unref(this.subscribedTopics);return s.includes("*")?r.searchParams.append("topic","*"):s.forEach(i=>r.searchParams.append("topic",i)),c.unref(this.lastEventId)&&r.searchParams.append("Last-Event-ID",c.unref(this.lastEventId)),r.toString()}),this.emitter=Wt()}subscribe(t=["*"],e=!0){Array.isArray(t)||(t=[t]);const r=Array.from(c.unref(this.subscribedTopics)),s=[...new Set([...c.unref(this.subscribedTopics),...t])];this.subscribedTopics.value=s,e&&!ze(r,s)&&this.listen()}unsubscribe(t){Array.isArray(t)||(t=[t]),this.subscribedTopics.value=this.subscribedTopics.value.filter(e=>!t.includes(e)),this.connection&&this.listen()}addListener(t){return this.emitter.on("message",t)}removeListener(t){return this.emitter.off("message",t)}listen(){if(c.unref(this.subscribedTopics).length===0){this.stop();return}this.connection||this.connect()}connect(){this.stop(),this.connection=new Se(c.unref(this.endpoint),this.options),this.connection.onopen=()=>this.emitter.emit("open",{endpoint:c.unref(this.endpoint)}),this.connection.onmessage=t=>(this.lastEventId.value=t.lastEventId,this.emitter.emit("message",t)),this.connection.onerror=t=>{this.emitter.emit("error",t),typeof this.options.reconnectInterval=="number"&&(this.stop(),setTimeout(()=>this.connect(),this.options.reconnectInterval))}}stop(){var t;(t=this.connection)==null||t.close(),this.connection=void 0}}const xt=(n,t)=>Object.assign(t,n),Ft=()=>{};function Lt(n,t,e=["*"],r=xt,s=Ft){Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);const i=u=>{try{const h=JSON.parse(u.data);if(!et(h))return;if(Object.keys(h).length===1){s(R(h));return}for(const m of t)X(R(h),m)&&r(h,c.unref(m))}catch(h){console.debug(h)}};return n.addListener(i),n.subscribe(e),i}const qt=(n,t,e)=>{Array.isArray(t)||(t=[t]);const r=s=>{let i;try{i=JSON.parse(s.data)}catch(u){console.debug(u);return}if(typeof i!="object"){console.debug("Received an event which is not an object.");return}try{for(const u of t)if(typeof Jt(u).fromUri(R(i))<"u"){e(i);break}}catch(u){console.error(u)}};return n.addListener(r),n.subscribe(t),r},Ie=(n,t={removeListenersOnUnmount:!0})=>{n=n??_t();const e=[];return t.removeListenersOnUnmount&&c.onUnmounted(()=>{for(const s of e)n.removeListener(s)}),{synchronize:(s,i=["*"],u=xt,h=Ft)=>{const m=Lt(n,s,i,u,h);return e.push(m),m},on(s,i){const u=qt(n,s,i);return e.push(u),u}}},Oe={"hydra:Collection":Ct,"hydra:Error":yt,ConstraintViolationList:jt};class kt{constructor(){Object.assign(this,{*[Symbol.iterator](){yield*Object.values(this)}})}get length(){return Array.from(this).length}forEach(t){return Array.from(this).forEach(t)}map(t){return Array.from(this).map(t)}filter(t){return Array.from(this).filter(t)}find(t){return Array.from(this).find(t)}findIndex(t){return Array.from(this).findIndex(t)}}const De=function(n){throw n};class Me{constructor(t,e={}){y(this,"api");y(this,"endpoints");y(this,"classmap");this.api=t;const{endpoints:r,classmap:s}=e;this.endpoints=new Dt(r??{}),this.classmap={...Oe,...s},this.errorHandler=e.errorHandler??De}factory(t,e){for(const r in this.classmap)if(r===(t["@type"]??t)){const s=this.classmap[r];return t instanceof s?t:(t=Object.assign(new s,t),e&&Object.assign(t,{statusCode:e}),c.reactive(t))}return t}storeItem({state:t},e){const r=R(e);return Object.keys(t.items).includes(r)?Object.assign(t.items[r],e):t.items[r]=c.ref(e),t.items[r]}removeItem({state:t},e){const r=R(e);delete t.items[r]}async clearItems({state:t}){t.items=c.reactive(new kt)}async handle(t,{errorHandler:e=this.errorHandler}={}){var r,s,i,u;try{const{data:h}=await t();return this.factory(h)}catch(h){typeof((r=h.response)==null?void 0:r.data)=="object"&&((s=h.response)==null?void 0:s.data)!=null&&(h=this.factory(h.response.data,(i=h.response)==null?void 0:i.status)),h.statusCode=h.statusCode??((u=h.response)==null?void 0:u.status),e(h)}}async fetchItem({state:t},e,r){let s=new Z.URI(R(e));r!=null&&r.groups&&(s=s.withQuery(`${new Z.QueryString(s.getQuery()).withParam("groups",r.groups)}`));let i=await this.handle(()=>this.api.get(`${s}`,r),r);return i=this.factory(i),(r==null?void 0:r.store)??!0?this.storeItem({state:t},i):i}async getItem({state:t},e,r){if(e===null)return null;const s=R(e),i=at(t.items,s);return i??await this.fetchItem({state:t},s,r)}async fetchCollection({state:t},e,r){let s=new Z.URI(`${e}`);r!=null&&r.groups&&(s=s.withQuery(`${new Z.QueryString(s.getQuery()).withParam("groups",r.groups)}`));const i=await this.handle(()=>this.api.get(`${s}`,r),r);i["hydra:member"]=i["hydra:member"].map(m=>this.factory(m));const u=this.factory(i);if(u["hydra:member"]=u["hydra:member"].map(m=>this.factory(m)),(r==null?void 0:r.store)??!1)for(const m of u["hydra:member"])this.storeItem({state:t},m);return u}async createItem({state:t},e,r){const s=this.endpoints.for(e);return e=await this.handle(()=>this.api.post(s,e,r),r),(r==null?void 0:r.store)??!0?this.storeItem({state:t},e):e}async updateItem({state:t},e,r){return it(e),e=await this.handle(()=>this.api.put(R(e),e,r),r),(r==null?void 0:r.store)??!0?this.storeItem({state:t},e):e}async upsertItem({state:t},e,r){return et(e)?this.updateItem({state:t},e,r):this.createItem({state:t},e,r)}async deleteItem({state:t},e,r){const s=R(e);await this.handle(()=>this.api.delete(s,r),r),e=at(t.items,s),e!==null&&this.removeItem({state:t},e)}async getRelation({state:t},e,r={}){if(e===null)return null;if(typeof e=="function"){const s=U.asyncComputed(()=>this.getRelation({state:t},e(),r));return await U.until(s).not.toBe(void 0),s}if((r.useExisting??!0)===!0){const s=at(t.items,e);if(s!=null)return s}if(typeof e=="object"&&(r.force??!1)===!1){const s=this.factory(e);return(r==null?void 0:r.store)??!1?this.storeItem({state:t},s):s}return await this.getItem({state:t},e,r)}async getRelations({state:t},e,r){if(typeof e=="function"){const s=U.asyncComputed(()=>this.getRelations({state:t},e(),r));return await U.until(s).not.toBe(void 0),s}return Promise.all(e.map(s=>this.getRelation({state:t},s,r)))}async install(t){t.state.items=c.reactive(new kt),t.state.endpoints=c.readonly(this.endpoints),t.state.classmap=c.readonly(this.classmap),t.storeItem=e=>this.storeItem(t,e),t.removeItem=e=>this.removeItem(t,e),t.clearItems=()=>this.clearItems(t),t.getItem=(e,r)=>this.getItem(t,e,r),t.fetchItem=(e,r)=>this.fetchItem(t,e,r),t.fetchCollection=(e,r)=>this.fetchCollection(t,e,r),t.createItem=(e,r)=>this.createItem(t,e,r),t.updateItem=(e,r)=>this.updateItem(t,e,r),t.upsertItem=(e,r)=>this.upsertItem(t,e,r),t.deleteItem=(e,r)=>this.deleteItem(t,e,r),t.getRelation=(e,r)=>this.getRelation(t,e,r),t.getRelations=(e,r)=>this.getRelations(t,e,r),t.endpoint=e=>t.state.endpoints[e],t.getItemsByType=e=>t.state.items.filter(r=>e===r["@type"]),t.factory=(e,r)=>(r=r??e,typeof e=="string"&&(r["@type"]=e),this.factory(r))}}function Nt(n){if(typeof n=="string")return n;try{return R(n)}catch{return null}}function Ee(n){return n.map(t=>Nt(t))}async function Vt(n,t){try{return await t.getItem(n)}catch{return null}}async function Pe(n,t){return Promise.all(n.map(e=>Vt(e,t)))}class je extends Q{constructor(e,{store:r,multiple:s=!1}){super();y(this,"items",[]);y(this,"multiple");y(this,"store");this.items=Array.isArray(e)?e:[e],this.store=r,this.multiple=s}get item(){return this.items[0]??null}set item(e){this.items=[e],this.multiple=!1}normalize(){return this.multiple||this.items.length>1?Ee(this.items):Nt(this.item)}async denormalize(e){if(Array.isArray(e)){this.items=await Pe(e,this.store);return}this.items=[await Vt(e,this.store)]}}const Ce={asc:"desc",desc:"asc"};class Ae extends Q{constructor(e={}){super();y(this,"order");this.order=e}revert(){const e={};for(const r in this.order){const s=this.order[r];e[r]=Ce[s]??s}return this.order=e,this}normalize(){return this.order}async denormalize(e){this.order={},typeof e=="object"&&e!=null&&(this.order=e)}}class Ye extends Q{constructor(t,e,r=!0,s=!0){super(),this.left=t,this.right=e,this.includeLeft=r,this.includeRight=s}normalize(){const t={};return this.left!=null&&(t[this.includeLeft?"gte":"gt"]=`${this.left}`),this.right!=null&&(t[this.includeRight?"lte":"lt"]=`${this.right}`),Object.keys(t).length>0?t:void 0}async denormalize(t){t==null||typeof t!="object"||(Object.keys(t).includes("gt")&&(this.left=parseFloat(t.gt),this.includeLeft=!1),Object.keys(t).includes("gte")&&(this.left=parseFloat(t.gte),this.includeLeft=!0),Object.keys(t).includes("lt")&&(this.right=parseFloat(t.lt),this.includeRight=!1),Object.keys(t).includes("lte")&&(this.right=parseFloat(t.lte),this.includeRight=!0))}}class Ue extends Q{constructor(e=null){super();y(this,"_value");this.value=e}get value(){return this._value}set value(e){this._value=e&&e.toString()}normalize(){var e;return[void 0,null,""].includes((e=this.value)==null?void 0:e.trim())?null:this.value.trim()}async denormalize(e){if(typeof e=="string"&&(e=e.trim()),[void 0,null,""].includes(e)){this.value=null;return}this.value=e}}class Re extends Q{constructor(e=null){super();y(this,"value");this.value=e}normalize(){return this.value==null?null:this.value?"true":"false"}async denormalize(e){if(e==null){this.value=null;return}e=`${e}`.trim(),this.value=["true","on","yes","1"].includes(e.toLowerCase())}}function _e({itemsPerPage:n,currentPage:t,totalItems:e}){return e==null?new Fe({itemsPerPage:n,currentPage:t}):new xe({itemsPerPage:n,currentPage:t,totalItems:e})}function He(n){return Array.from({length:n},(t,e)=>e+1)}class pt{constructor({itemsPerPage:t,currentPage:e}){y(this,"itemsPerPage");y(this,"totalItems");y(this,"currentPage");y(this,"previousPage");y(this,"nextPage");y(this,"lastPage");y(this,"offset");y(this,"_pages");this.itemsPerPage=parseInt(t),this.currentPage=parseInt(e),this.offset=Math.max(0,e*t-t),this.previousPage=Math.max(1,this.currentPage-1)}get pages(){return this._pages===void 0&&(this._pages=He(this.lastPage)),this._pages}isPartial(){return this.totalItems==null}isFirstPage(t=void 0){return parseInt(t??this.currentPage)===1}isPreviousPage(t){return parseInt(t)===this.previousPage}isCurrentPage(t){return parseInt(t)===this.currentPage}isNextPage(t){return parseInt(t)===this.nextPage}isLastPage(t=void 0){return parseInt(t??this.currentPage)===this.lastPage}*[Symbol.iterator](){yield*this.pages}truncate(t,e=!1){return new Le(this,t,e)}}class xe extends pt{constructor({itemsPerPage:t,currentPage:e,totalItems:r}){super({itemsPerPage:t,currentPage:e}),this.totalItems=parseInt(r),this.lastPage=Math.max(1,Math.ceil(this.totalItems/Math.max(1,this.itemsPerPage))),this.nextPage=Math.min(this.lastPage,this.currentPage+1)}}class Fe extends pt{constructor({itemsPerPage:t,currentPage:e,totalItems:r}){super({itemsPerPage:t,currentPage:e,totalItems:r}),this.nextPage=this.lastPage=this.currentPage+1}}class Le extends pt{constructor(t,e,r=!1){super(t),Object.assign(this,t);const s=[];r&&s.push(1);for(let i=1;i<=this.lastPage;i++)i===this.currentPage&&s.push(i),i<this.currentPage&&i>=this.currentPage-e&&s.push(i),i>this.currentPage&&i<=this.currentPage+e&&s.push(i);r&&s.push(this.lastPage),this._pages=[...new Set(s)]}}class qe{constructor(){y(this,"fields");y(this,"preload")}get headers(){var e,r;const t={};return(((e=this.preload)==null?void 0:e.length)??0)!==0&&(t.preload=[...new Set(this.preload)].map(s=>`"${s}"`).join(", ")),(((r=this.fields)==null?void 0:r.length)??0)!==0&&(t.fields=[...new Set([...this.fields,...this.preload??[]])].map(s=>`"${s}"`).join(", ")),t}}function ke({fields:n,preload:t}={}){return Object.assign(new qe,{fields:n},{preload:t}).headers}a.AbortError=vt,a.ApiClient=Kt,a.ArrayFilter=ee,a.ConstraintViolationList=jt,a.DateRangeFilter=It,a.DatetimeRangeFilter=Ot,a.FakeEventSource=Rt,a.FilterCollection=ae,a.HttpError=wt,a.HydraCollection=Ct,a.HydraEndpoint=st,a.HydraEndpoints=Dt,a.HydraError=yt,a.HydraPlugin=Me,a.ItemFilter=je,a.Mercure=Ht,a.OrderFilter=Ae,a.RangeFilter=Ye,a.TextFilter=Ue,a.TruthyFilter=Re,a.Violation=Pt,a.areSameIris=X,a.checkValidItem=it,a.clone=K,a.containsIri=Et,a.createMercure=Te,a.createPager=_e,a.createStore=ue,a.getId=Mt,a.getIds=he,a.getIri=R,a.getIris=fe,a.getItemByIri=at,a.getItemIndexByIri=de,a.getItemsByType=me,a.hasIri=et,a.mercureSync=Lt,a.normalizeIris=ye,a.normalizeItemRelations=Yt,a.on=qt,a.partialItem=ge,a.useEndpoint=ce,a.useFilters=oe,a.useFormValidation=$e,a.useItemForm=be,a.useMercure=_t,a.useMercureSync=Ie,a.useStore=mt,a.vulcain=ke,a.withoutDuplicates=te,a.withoutIri=le,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});
