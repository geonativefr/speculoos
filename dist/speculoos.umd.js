var Ve=Object.defineProperty,Pe=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var xt=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var St=(a,s,q)=>s in a?Ve(a,s,{enumerable:!0,configurable:!0,writable:!0,value:q}):a[s]=q,H=(a,s)=>{for(var q in s||(s={}))ke.call(s,q)&&St(a,q,s[q]);if(xt)for(var q of xt(s))Fe.call(s,q)&&St(a,q,s[q]);return a},ft=(a,s)=>Pe(a,Le(s));var $=(a,s,q)=>(St(a,typeof s!="symbol"?s+"":s,q),q);(function(a,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("vue"),require("clone-deep"),require("md5"),require("is-empty"),require("vue-router"),require("psr7-js"),require("uuid"),require("mitt"),require("uri-templates"),require("@vueuse/core")):typeof define=="function"&&define.amd?define(["exports","vue","clone-deep","md5","is-empty","vue-router","psr7-js","uuid","mitt","uri-templates","@vueuse/core"],s):(a=typeof globalThis!="undefined"?globalThis:a||self,s(a.Speculoos={},a.Vue,a.clone,a.md5,a.empty,a.vueRouter,a.psr7Js,a.uuid,a.mitt,a.uriTemplate,a.core))})(this,function(a,s,q,Zt,Jt,ht,it,Qt,Wt,Bt,Gt){"use strict";function et(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var B=et(q),Kt=et(Zt),G=et(Jt),Xt=et(Wt),te=et(Bt);class Ot extends Error{constructor(t){super(t.statusText);this.response=t,this.statusCode=parseInt(this.response.status)}isStatusCode(t){const e=n=>parseInt(n)===this.statusCode;for(let n of arguments)if(e(n))return!0;return!1}isClientError(){return this.statusCode>=400&&this.statusCode<500}isServerError(){return this.statusCode>500}static guard(t){if(t.status>=400)throw new this(t);return t}}const lt=r=>{if(!(r instanceof Headers))return r;const t={};for(let e of r.keys())t[e]=r.get(e);return t},ee={Accept:"application/ld+json, application/json"},Dt=async r=>{try{const t=await r.text();try{r.data=JSON.parse(t),r.json=()=>new Promise(e=>e(r.data))}catch{r.data=t,r.json=()=>new Promise(n=>n(r.data))}}catch{}return r};class re{constructor({baseUri:t="",options:e={},fetcher:n=window.fetch.bind(window)}={}){$(this,"baseUri");$(this,"options");$(this,"fetch");this.baseUri=t,this.options=e,this.fetch=async(i,c)=>n(i,c).then(Dt)}resolve(t){return new URL(t,this.baseUri).toString()}mergeOptions(t){let e=H({},this.options);Object.keys(e).includes("headers")&&(e.headers=lt(e.headers));for(let n of arguments){let i=H({},n);Object.keys(i).includes("headers")&&(i.headers=H({},lt(i.headers))),e=H(H({},B.default(e)),B.default(i))}return e}async request(t,e,n){e=`${s.unref(e)}`,n=this.mergeOptions({method:t},n),Object.keys(n).includes("headers")&&(n.headers=new Headers(H(H({},ee),lt(n.headers))));try{s.isRef(n==null?void 0:n.isLoading)&&(n.isLoading.value=!0);const i=await this.fetch(e,n);return Ot.guard(i)}finally{s.isRef(n==null?void 0:n.isLoading)&&(n.isLoading.value=!1)}}async get(t,e={}){return await this.request("GET",this.resolve(t),this.mergeOptions(e))}async post(t,e,n={}){return await this.request("POST",this.resolve(t),this.mergeOptions({body:JSON.stringify(s.unref(e)),headers:{"Content-Type":"application/json"}},n))}async put(t,e,n={}){return await this.request("PUT",this.resolve(t),this.mergeOptions({body:JSON.stringify(s.unref(e)),headers:{"Content-Type":"application/json"}},n))}async delete(t,e={}){return await this.request("DELETE",this.resolve(t),this.mergeOptions(e))}}class ne{constructor(t=window.fetch.bind(window)){$(this,"fetch");$(this,"pendingRequests",[]);return this.fetch=t,(e,n)=>{try{const i=Kt.default(JSON.stringify(H({url:e},n))),c=this.pendingRequests.findIndex(m=>i===m.hash);if(c>=0)return this.pendingRequests[c].promise;const h=this.fetch(e,n).then(Dt);return this.pendingRequests.push({hash:i,promise:h}),h.then(m=>{const d=this.pendingRequests.findIndex(v=>i===v.hash);return d>=0&&this.pendingRequests.splice(d,1),m})}catch{return this.fetch(e,n)}}}}function ie(r=void 0){return new ne(r)}class K{normalize(){throw Error("This method is meant to be overriden.")}static denormalize(t){throw Error("This method is meant to be overriden.")}}var dt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Tt={exports:{}};(function(r,t){(function(e,n){r.exports=n()})(dt,function(){var e=1e3,n=6e4,i=36e5,c="millisecond",h="second",m="minute",d="hour",v="day",V="week",Y="month",T="quarter",M="year",D="date",f="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},z=function(y,l,o){var g=String(y);return!g||g.length>=l?y:""+Array(l+1-g.length).join(o)+y},P={s:z,z:function(y){var l=-y.utcOffset(),o=Math.abs(l),g=Math.floor(o/60),u=o%60;return(l<=0?"+":"-")+z(g,2,"0")+":"+z(u,2,"0")},m:function y(l,o){if(l.date()<o.date())return-y(o,l);var g=12*(o.year()-l.year())+(o.month()-l.month()),u=l.clone().add(g,Y),w=o-u<0,p=l.clone().add(g+(w?-1:1),Y);return+(-(g+(o-u)/(w?u-p:p-u))||0)},a:function(y){return y<0?Math.ceil(y)||0:Math.floor(y)},p:function(y){return{M:Y,y:M,w:V,d:v,D,h:d,m,s:h,ms:c,Q:T}[y]||String(y||"").toLowerCase().replace(/s$/,"")},u:function(y){return y===void 0}},R="en",N={};N[R]=E;var L=function(y){return y instanceof Z},F=function(y,l,o){var g;if(!y)return R;if(typeof y=="string")N[y]&&(g=y),l&&(N[y]=l,g=y);else{var u=y.name;N[u]=y,g=u}return!o&&g&&(R=g),g||!o&&R},O=function(y,l){if(L(y))return y.clone();var o=typeof l=="object"?l:{};return o.date=y,o.args=arguments,new Z(o)},b=P;b.l=F,b.i=L,b.w=function(y,l){return O(y,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var Z=function(){function y(o){this.$L=F(o.locale,null,!0),this.parse(o)}var l=y.prototype;return l.parse=function(o){this.$d=function(g){var u=g.date,w=g.utc;if(u===null)return new Date(NaN);if(b.u(u))return new Date;if(u instanceof Date)return new Date(u);if(typeof u=="string"&&!/Z$/i.test(u)){var p=u.match(S);if(p){var I=p[2]-1||0,C=(p[7]||"0").substring(0,3);return w?new Date(Date.UTC(p[1],I,p[3]||1,p[4]||0,p[5]||0,p[6]||0,C)):new Date(p[1],I,p[3]||1,p[4]||0,p[5]||0,p[6]||0,C)}}return new Date(u)}(o),this.$x=o.x||{},this.init()},l.init=function(){var o=this.$d;this.$y=o.getFullYear(),this.$M=o.getMonth(),this.$D=o.getDate(),this.$W=o.getDay(),this.$H=o.getHours(),this.$m=o.getMinutes(),this.$s=o.getSeconds(),this.$ms=o.getMilliseconds()},l.$utils=function(){return b},l.isValid=function(){return this.$d.toString()!==f},l.isSame=function(o,g){var u=O(o);return this.startOf(g)<=u&&u<=this.endOf(g)},l.isAfter=function(o,g){return O(o)<this.startOf(g)},l.isBefore=function(o,g){return this.endOf(g)<O(o)},l.$g=function(o,g,u){return b.u(o)?this[g]:this.set(u,o)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(o,g){var u=this,w=!!b.u(g)||g,p=b.p(o),I=function(tt,k){var Q=b.w(u.$u?Date.UTC(u.$y,k,tt):new Date(u.$y,k,tt),u);return w?Q:Q.endOf(v)},C=function(tt,k){return b.w(u.toDate()[tt].apply(u.toDate("s"),(w?[0,0,0,0]:[23,59,59,999]).slice(k)),u)},j=this.$W,U=this.$M,J=this.$D,x="set"+(this.$u?"UTC":"");switch(p){case M:return w?I(1,0):I(31,11);case Y:return w?I(1,U):I(0,U+1);case V:var rt=this.$locale().weekStart||0,nt=(j<rt?j+7:j)-rt;return I(w?J-nt:J+(6-nt),U);case v:case D:return C(x+"Hours",0);case d:return C(x+"Minutes",1);case m:return C(x+"Seconds",2);case h:return C(x+"Milliseconds",3);default:return this.clone()}},l.endOf=function(o){return this.startOf(o,!1)},l.$set=function(o,g){var u,w=b.p(o),p="set"+(this.$u?"UTC":""),I=(u={},u[v]=p+"Date",u[D]=p+"Date",u[Y]=p+"Month",u[M]=p+"FullYear",u[d]=p+"Hours",u[m]=p+"Minutes",u[h]=p+"Seconds",u[c]=p+"Milliseconds",u)[w],C=w===v?this.$D+(g-this.$W):g;if(w===Y||w===M){var j=this.clone().set(D,1);j.$d[I](C),j.init(),this.$d=j.set(D,Math.min(this.$D,j.daysInMonth())).$d}else I&&this.$d[I](C);return this.init(),this},l.set=function(o,g){return this.clone().$set(o,g)},l.get=function(o){return this[b.p(o)]()},l.add=function(o,g){var u,w=this;o=Number(o);var p=b.p(g),I=function(U){var J=O(w);return b.w(J.date(J.date()+Math.round(U*o)),w)};if(p===Y)return this.set(Y,this.$M+o);if(p===M)return this.set(M,this.$y+o);if(p===v)return I(1);if(p===V)return I(7);var C=(u={},u[m]=n,u[d]=i,u[h]=e,u)[p]||1,j=this.$d.getTime()+o*C;return b.w(j,this)},l.subtract=function(o,g){return this.add(-1*o,g)},l.format=function(o){var g=this,u=this.$locale();if(!this.isValid())return u.invalidDate||f;var w=o||"YYYY-MM-DDTHH:mm:ssZ",p=b.z(this),I=this.$H,C=this.$m,j=this.$M,U=u.weekdays,J=u.months,x=function(k,Q,vt,ct){return k&&(k[Q]||k(g,w))||vt[Q].substr(0,ct)},rt=function(k){return b.s(I%12||12,k,"0")},nt=u.meridiem||function(k,Q,vt){var ct=k<12?"AM":"PM";return vt?ct.toLowerCase():ct},tt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:j+1,MM:b.s(j+1,2,"0"),MMM:x(u.monthsShort,j,J,3),MMMM:x(J,j),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:x(u.weekdaysMin,this.$W,U,2),ddd:x(u.weekdaysShort,this.$W,U,3),dddd:U[this.$W],H:String(I),HH:b.s(I,2,"0"),h:rt(1),hh:rt(2),a:nt(I,C,!0),A:nt(I,C,!1),m:String(C),mm:b.s(C,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:p};return w.replace(A,function(k,Q){return Q||tt[k]||p.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(o,g,u){var w,p=b.p(g),I=O(o),C=(I.utcOffset()-this.utcOffset())*n,j=this-I,U=b.m(this,I);return U=(w={},w[M]=U/12,w[Y]=U,w[T]=U/3,w[V]=(j-C)/6048e5,w[v]=(j-C)/864e5,w[d]=j/i,w[m]=j/n,w[h]=j/e,w)[p]||j,u?U:b.a(U)},l.daysInMonth=function(){return this.endOf(Y).$D},l.$locale=function(){return N[this.$L]},l.locale=function(o,g){if(!o)return this.$L;var u=this.clone(),w=F(o,g,!0);return w&&(u.$L=w),u},l.clone=function(){return b.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},y}(),Ft=Z.prototype;return O.prototype=Ft,[["$ms",c],["$s",h],["$m",m],["$H",d],["$W",v],["$M",Y],["$y",M],["$D",D]].forEach(function(y){Ft[y[1]]=function(l){return this.$g(l,y[0],y[1])}}),O.extend=function(y,l){return y.$i||(y(l,Z,O),y.$i=!0),O},O.locale=F,O.isDayjs=L,O.unix=function(y){return O(1e3*y)},O.en=N[R],O.Ls=N,O.p={},O})})(Tt);var W=Tt.exports,It={exports:{}};(function(r,t){(function(e,n){r.exports=n()})(dt,function(){var e="minute",n=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(c,h,m){var d=h.prototype;m.utc=function(f){var S={date:f,utc:!0,args:arguments};return new h(S)},d.utc=function(f){var S=m(this.toDate(),{locale:this.$L,utc:!0});return f?S.add(this.utcOffset(),e):S},d.local=function(){return m(this.toDate(),{locale:this.$L,utc:!1})};var v=d.parse;d.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),v.call(this,f)};var V=d.init;d.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else V.call(this)};var Y=d.utcOffset;d.utcOffset=function(f,S){var A=this.$utils().u;if(A(f))return this.$u?0:A(this.$offset)?Y.call(this):this.$offset;if(typeof f=="string"&&(f=function(R){R===void 0&&(R="");var N=R.match(n);if(!N)return null;var L=(""+N[0]).match(i)||["-",0,0],F=L[0],O=60*+L[1]+ +L[2];return O===0?0:F==="+"?O:-O}(f))===null)return this;var E=Math.abs(f)<=16?60*f:f,z=this;if(S)return z.$offset=E,z.$u=f===0,z;if(f!==0){var P=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(z=this.local().add(E+P,e)).$offset=E,z.$x.$localOffset=P}else z=this.utc();return z};var T=d.format;d.format=function(f){var S=f||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return T.call(this,S)},d.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||new Date().getTimezoneOffset());return this.$d.valueOf()-6e4*f},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var M=d.toDate;d.toDate=function(f){return f==="s"&&this.$offset?m(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():M.call(this)};var D=d.diff;d.diff=function(f,S,A){if(f&&this.$u===f.$u)return D.call(this,f,S,A);var E=this.local(),z=m(f).local();return D.call(E,z,S,A)}}})})(It);var se=It.exports,Mt={exports:{}};(function(r,t){(function(e,n){r.exports=n()})(dt,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},n={};return function(i,c,h){var m,d=function(T,M,D){D===void 0&&(D={});var f=new Date(T);return function(S,A){A===void 0&&(A={});var E=A.timeZoneName||"short",z=S+"|"+E,P=n[z];return P||(P=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:S,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:E}),n[z]=P),P}(M,D).formatToParts(f)},v=function(T,M){for(var D=d(T,M),f=[],S=0;S<D.length;S+=1){var A=D[S],E=A.type,z=A.value,P=e[E];P>=0&&(f[P]=parseInt(z,10))}var R=f[3],N=R===24?0:R,L=f[0]+"-"+f[1]+"-"+f[2]+" "+N+":"+f[4]+":"+f[5]+":000",F=+T;return(h.utc(L).valueOf()-(F-=F%1e3))/6e4},V=c.prototype;V.tz=function(T,M){T===void 0&&(T=m);var D=this.utcOffset(),f=this.toDate(),S=f.toLocaleString("en-US",{timeZone:T}),A=Math.round((f-new Date(S))/1e3/60),E=h(S).$set("millisecond",this.$ms).utcOffset(15*-Math.round(f.getTimezoneOffset()/15)-A,!0);if(M){var z=E.utcOffset();E=E.add(D-z,"minute")}return E.$x.$timezone=T,E},V.offsetName=function(T){var M=this.$x.$timezone||h.tz.guess(),D=d(this.valueOf(),M,{timeZoneName:T}).find(function(f){return f.type.toLowerCase()==="timezonename"});return D&&D.value};var Y=V.startOf;V.startOf=function(T,M){if(!this.$x||!this.$x.$timezone)return Y.call(this,T,M);var D=h(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return Y.call(D,T,M).tz(this.$x.$timezone,!0)},h.tz=function(T,M,D){var f=D&&M,S=D||M||m,A=v(+h(),S);if(typeof T!="string")return h(T).tz(S);var E=function(N,L,F){var O=N-60*L*1e3,b=v(O,F);if(L===b)return[O,L];var Z=v(O-=60*(b-L)*1e3,F);return b===Z?[O,b]:[N-60*Math.min(b,Z)*1e3,Math.max(b,Z)]}(h.utc(T,f).valueOf(),A,S),z=E[0],P=E[1],R=h(z).utcOffset(P);return R.$x.$timezone=S,R},h.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},h.tz.setDefault=function(T){m=T}}})})(Mt);var ae=Mt.exports;W.extend(se),W.extend(ae);const ut=class extends K{constructor({after:t=null,before:e=null}={}){super();$(this,"after");$(this,"before");this.after=t,this.before=e}normalize(){this.constructor.ensureTimezoneIsSet();let t=null,e=null;return G.default(this.after)||(t=W.tz(this.after,this.constructor.userTimezone).hour(0).minute(0).second(0).tz("UTC").format("YYYY-MM-DD[T]HH:mm:ss[Z]")),G.default(this.before)||(e=W.tz(this.before,this.constructor.userTimezone).hour(0).minute(0).second(0).add(1,"day").subtract(1,"second").tz("UTC").format("YYYY-MM-DD[T]HH:mm:ss[Z]")),{after:t,before:e}}static denormalize(t){this.ensureTimezoneIsSet();let e=null,n=null;return G.default(t.after)||(e=W.tz(t.after,"UTC").tz(ut.userTimezone).hour(0).minute(0).second(0).format("YYYY-MM-DD")),G.default(t.before)||(n=W.tz(t.before,"UTC").tz(ut.userTimezone).hour(0).minute(0).second(0).add(1,"day").subtract(1,"second").format("YYYY-MM-DD")),new this({after:e,before:n})}static ensureTimezoneIsSet(){var t;this.userTimezone=(t=this.userTimezone)!=null?t:W.tz.guess()||"UTC"}};let mt=ut;$(mt,"userTimezone");function oe(r){return r==null?!0:typeof r=="string"?r.trim().length===0:typeof r=="function"||Array.isArray(r)?r.length===0:r instanceof Object?Object.keys(r).length===0:!1}function yt(r){if(!(r instanceof Object))return r;if(Array.isArray(r))return r.filter(yt);const t=H({},r);return Object.keys(t).forEach(e=>{t[e]instanceof Object&&(t[e]=yt(t[e])),oe(t[e])&&delete t[e]}),t}class ue{constructor(t={}){$(this,"_filters",[]);if(!(t instanceof Object))throw Error("A FilterCollection expects an object.");Object.keys(t).forEach(e=>{if(!(t[e]instanceof K))throw Error(`Filter ${e} doesn't extend the Filter class.`);this[e]=t[e],this._filters.push(e)})}normalize(){const t={};return this._filters.forEach(e=>{const n=this[e];t[e]=n.normalize()}),yt(t)}async denormalize(t,e){for(const n of this._filters)typeof t[n]!="undefined"&&(this[n]=await Object.getPrototypeOf(this[n]).constructor.denormalize(t[n],e));return this}}async function ce(r={},t={preserveQuery:!0}){if(typeof r!="function")throw Error("initialState should be provided as a function.");const e=ht.useRoute(),n=ht.useRouter(),i=s.ref(r());async function c(v){Object.assign(s.unref(i),await s.unref(i).denormalize(v.query,t))}function h(){i.value=B.default(r())}function m(v={}){const V={};return t.preserveQuery===!0&&Object.assign(V,e.query),Object.assign(V,s.unref(i).normalize(),v)}async function d(v={}){await n.push(Object.assign(H({},e),{query:m(v)}))}return ht.onBeforeRouteUpdate(v=>c(v)),await c(e),{filters:i,buildQueryParams:m,submit:d,clear:h}}const fe=async({state:r={},methods:t={},name:e="store"}={})=>{r=s.reactive(r);const n=ft(H({name:e,state:r},Object.keys(t).reduce(function(i,c){const h=t[c];return i[c]=function(){return h(r,...arguments)},i},{})),{async use(i){return await i.install(this),this}});return n.install=i=>i.provide(e,ft(H({},n),{state:s.readonly(r)})),n},gt=(r="store")=>s.inject(r);class zt{constructor(t){Object.keys(t).forEach(e=>{this[e]=new st(t[e])})}for(t){if(typeof t=="string"&&Object.keys(this).includes(t))return this[t];if(!Object.keys(this).includes(t["@type"]))throw Error(`Endpoint not found for item ${t["@type"]}.`);return this[t["@type"]]}}class st{constructor(t){$(this,"endpoint");this.endpoint=t}toString(){return this.endpoint}toJSON(){return this.endpoint}withQuery(t){const e=new it.URI(this.endpoint),n=new it.QueryString(e).withParams(t);return new st(e.withQuery(n.toString()).toString())}paginated(t){if(t===!1)return this.withQuery({pagination:0});const e={pagination:1};return t&&(e.itemsPerPage=t),this.withQuery(e)}synchronize(t=window.location.href){return this.withQuery(new it.QueryString(new it.URI(t)).getParams())}}const he=(r,t)=>gt(t).state.endpoints[r];function at(r){return r=s.unref(r),r==null?!1:Object.keys(r).includes("@id")&&r["@id"]!=null}function _(r){return r=s.unref(r),r===null?null:typeof r=="string"?r:(ot(r),r["@id"])}function jt(r){const t=_(r);return t.substring(t.lastIndexOf("/")+1)}function le(r){return r.map(_)}function de(r){return r.map(jt)}function ot(r,t=null){if(typeof r!="object"||!("@id"in r))throw Error("Invalid item.");if(t!==null){if(typeof t=="string"&&t!==r["@type"])throw Error(`Expected item of type "${t}", got "${r["@type"]}".`);if(Array.isArray(t)&&t.includes(r["@type"])===!1)throw Error(`Expected item of any "${t.join("|")}", got "${r["@type"]}".`)}}function X(r,t){return _(r)===_(t)}function Et(r,t){if(r=s.unref(r),r=Array.from(r).map(s.unref),t=s.unref(t),Array.isArray(t)){const e=t;for(const n of e)if(Et(r,n))return!0;return!1}for(const e of r)if(X(e,t))return!0;return!1}function me(r,t){const e=r.findIndex(n=>X(n,t));return e>=0&&r.splice(e,1),r}function pt(r,t){const e=r.find(n=>X(n,t));return typeof e=="undefined"?null:e}function ye(r,t){return r.findIndex(e=>X(e,t))}function ge(r,t){return r.filter(e=>e["@type"]===t)}function pe(r){Object.assign(r,r.map(t=>_(t)))}function $e(r,t){return r=s.unref(r),ot(r),Object.assign({"@id":r["@id"],"@type":r["@type"]},t)}class $t extends Error{constructor(){super(...arguments);$(this,"statusCode")}get title(){return this["hydra:title"]}get description(){return this["hydra:description"]}}class Ct{constructor(){$(this,"id");$(this,"propertyPath");$(this,"message");$(this,"code");this.id=Qt.v4()}}class At extends $t{constructor(t){super();$(this,"_violations",[]);Object.assign(this,{*[Symbol.iterator](){yield*this.violations}}),Object.assign(this,t)}get violations(){return this._violations}set violations(t){this._violations=t.map(e=>Object.assign(new Ct,e))}getPropertyPaths(){return[...new Set(this.violations.map(({propertyPath:t})=>t))]}getViolations(t){const e=Array.from(arguments);return e.length===0?this.violations:G.default(e[0])?this.violations.filter(n=>G.default(n.propertyPath)):this.violations.filter(n=>t===n.propertyPath)}}class _t{constructor(t={}){Object.assign(this,ft(H({},t),{*[Symbol.iterator](){yield*this["hydra:member"]||[]}}))}get length(){return this.items.length}get totalItems(){return this["hydra:totalItems"]||0}get items(){return this["hydra:member"]||[]}forEach(t){return(this["hydra:member"]||[]).forEach(t)}map(t){return(this["hydra:member"]||[]).map(t)}filter(t){return(this["hydra:member"]||[]).filter(t)}find(t){return(this["hydra:member"]||[]).find(t)}findIndex(t){return(this["hydra:member"]||[]).findIndex(t)}}function we(r){if(typeof r!="object"||r==null)throw Error("Invalid object.");return Object.keys(r).forEach(t=>delete r[t]),r}function wt(r,t){return r=we(r),Object.assign(r,t)}function be(r){const t=gt(),e=s.ref(s.unref(r)),n=s.reactive(B.default(s.unref(r))),i=s.computed(()=>!at(s.unref(n))),c=s.ref(!1);s.watch(e,v=>wt(n,v));const h=s.computed(()=>JSON.stringify(s.unref(n))!==JSON.stringify(s.unref(e)));return{item:n,isUnsavedDraft:h,isCreationMode:i,isSubmitting:c,reset:()=>wt(n,B.default(s.unref(r))),submit:async()=>{try{c.value=!0;const v=await t.upsertItem(n);return e.value=v,wt(n,B.default(v)),v}finally{c.value=!1}}}}function ve(){const r=i=>{i=s.unref(i),i.querySelectorAll("[name]").forEach(function(c){c.setCustomValidity("")})},t=(i,c=!0)=>{i=s.unref(i);const h=i.checkValidity();return!h&&c&&i.reportValidity(),h},e=(i,c)=>{r(i),Array.from(c).forEach(h=>n(i,h)),t(i)},n=(i,{propertyPath:c,message:h})=>{var m;i=s.unref(i),(m=i.querySelector(`[name='${c}']`))==null||m.setCustomValidity(h)};return{resetValidity:r,bindViolations:e,validate:t}}let bt;const Se=1,Oe=2;class Yt{constructor(t,e){$(this,"readyState",Se);$(this,"url");$(this,"withCredentials");var n;this.url=t,this.withCredentials=(n=e==null?void 0:e.withCredentials)!=null?n:!1}onerror(){}onmessage(){}onopen(){}close(){this.readyState=Oe}triggerEvent(t){this.onmessage(t)}}(()=>{var r;return typeof process!="undefined"&&((r=process==null?void 0:process.env)==null?void 0:r.NODE_ENV)==="test"||"test"===void 0})()?bt=Yt:bt=window.EventSource;var De=bt;const Te=(r,t)=>{const e=new Ht(r,t);return Object.assign(e,{install(n){n.provide("mercure",e)}})},Ut=()=>s.inject("mercure");function Ie(r,t){return r.length===t.length&&r.every(e=>t.includes(e))}class Ht{constructor(t,e={}){$(this,"hub");$(this,"options");$(this,"connection");$(this,"subscribedTopics");$(this,"endpoint");$(this,"emitter");Object.assign(this,{hub:t,options:s.reactive(e)}),this.subscribedTopics=s.ref([]),this.endpoint=s.computed(()=>{const n=new URL(this.hub);return s.unref(this.subscribedTopics).forEach(i=>n.searchParams.append("topic",i)),n.toString()}),this.emitter=Xt.default()}subscribe(t=["*"],e=!0){Array.isArray(t)||(t=[t]);const n=Array.from(s.unref(this.subscribedTopics)),i=[...new Set([...s.unref(this.subscribedTopics),...t])];this.subscribedTopics.value=i,e&&!Ie(n,i)&&this.listen()}unsubscribe(t){Array.isArray(t)||(t=[t]),this.subscribedTopics.value=this.subscribedTopics.value.filter(e=>!t.includes(e)),this.connection&&this.listen()}addListener(t){return this.emitter.on("mercure",t)}removeListener(t){return this.emitter.off("mercure",t)}listen(){if(s.unref(this.subscribedTopics).length===0){this.stop();return}this.connect()}connect(){this.stop(),this.connection=new De(s.unref(this.endpoint),this.options),this.connection.onmessage=t=>this.emitter.emit("mercure",t)}stop(){var t;(t=this.connection)==null||t.close(),this.connection=void 0}}const qt=(r,t)=>Object.assign(t,r),Rt=()=>{};function Nt(r,t,e=["*"],n=qt,i=Rt){Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);const c=h=>{try{const m=JSON.parse(h.data);if(!at(m))return;if(Object.keys(m).length===1){i(_(m));return}for(const d of t)X(_(m),d)&&n(m,s.unref(d))}catch(m){console.debug(m)}};return r.addListener(c),r.subscribe(e),c}const Me=r=>{r=r!=null?r:Ut();const t=[];return s.onUnmounted(()=>{for(const i of t)r.removeListener(i)}),{synchronize:(i,c=["*"],h=qt,m=Rt)=>{t.push(Nt(r,i,c,h,m))},on:(i,c)=>{Array.isArray(i)||(i=[i]);const h=m=>{try{const d=JSON.parse(m.data);for(const v of i)if(typeof te.default(v).fromUri(_(d))!="undefined"){c(d);break}}catch{}};t.push(h),r.addListener(h),r.subscribe(i)}}},ze={"hydra:Collection":_t,"hydra:Error":$t,ConstraintViolationList:At},Vt=async(r,t)=>{const e=s.ref(!1),n=Gt.asyncComputed(r,t,{evaluating:e});return new Promise(i=>{s.watch(e,c=>{c===!1&&i(n)})})};class Pt{constructor(){Object.assign(this,{*[Symbol.iterator](){yield*Object.values(this)}})}get length(){return Array.from(this).length}forEach(t){return Array.from(this).forEach(t)}map(t){return Array.from(this).map(t)}filter(t){return Array.from(this).filter(t)}find(t){return Array.from(this).find(t)}findIndex(t){return Array.from(this).findIndex(t)}}const je=function(r){throw r};class Ee{constructor(t,e={}){$(this,"api");$(this,"endpoints");$(this,"classmap");var c;this.api=t;const{endpoints:n,classmap:i}=e;this.endpoints=new zt(n!=null?n:{}),this.classmap=H(H({},ze),i),this.errorHandler=(c=e.errorHandler)!=null?c:je}factory(t,e){var n;for(const i in this.classmap)if(i===((n=t["@type"])!=null?n:t)){const c=this.classmap[i];return t instanceof c?t:(t=Object.assign(new c,t),e&&Object.assign(t,{statusCode:e}),s.reactive(t))}return t}storeItem({state:t},e){const n=_(e);return Object.keys(t.items).includes(n)?Object.assign(t.items[n],e):t.items[n]=s.ref(e),t.items[n]}removeItem({state:t},e){const n=_(e);delete t.items[n]}async clearItems({state:t}){t.items=s.reactive(new Pt)}async handle(t,{errorHandler:e=this.errorHandler}={}){var n,i,c,h,m;try{const{data:d}=await t();return this.factory(d)}catch(d){typeof((n=d.response)==null?void 0:n.data)=="object"&&((i=d.response)==null?void 0:i.data)!=null&&(d=this.factory(d.response.data,(c=d.response)==null?void 0:c.status)),d.statusCode=(m=d.statusCode)!=null?m:(h=d.response)==null?void 0:h.status,e(d)}}async fetchItem({state:t},e,n){const i=_(e),c=await this.handle(()=>this.api.get(i,n),n);return this.storeItem({state:t},this.factory(c))}async getItem({state:t},e,n){if(e===null)return null;const i=_(e),c=pt(t.items,i);if(c!=null)return c;if(typeof e=="object"){const h=this.factory(e);return this.storeItem({state:t},h)}return await this.fetchItem({state:t},i,n)}async fetchCollection({state:t},e,n){const i=await this.handle(()=>this.api.get(e,n),n);i["hydra:member"]=i["hydra:member"].map(h=>this.factory(h));const c=this.factory(i);return c["hydra:member"]=c["hydra:member"].map(h=>this.factory(h)),c}async createItem({state:t},e,n){const i=this.endpoints.for(e);return e=await this.handle(()=>this.api.post(i,e,n),n),this.storeItem({state:t},e)}async updateItem({state:t},e,n){return ot(e),e=await this.handle(()=>this.api.put(_(e),e,n),n),this.storeItem({state:t},e)}async upsertItem({state:t},e,n){return at(e)?this.updateItem({state:t},e,n):this.createItem({state:t},e,n)}async deleteItem({state:t},e,n){const i=_(e);await this.handle(()=>this.api.delete(i,n),n),e=pt(t.items,i),e!==null&&this.removeItem({state:t},e)}async getRelation({state:t},e,n){return e===null?null:typeof e=="object"?e:typeof e=="function"?Vt(()=>this.getRelation({state:t},e(),n)):await this.getItem({state:t},e,n)}async getRelations({state:t},e,n){return typeof e=="function"?Vt(()=>this.getRelations({state:t},e(),n),[]):Promise.all(e.map(i=>this.getRelation({state:t},i,n)))}async install(t){t.state.items=s.reactive(new Pt),t.state.endpoints=s.readonly(this.endpoints),t.state.classmap=s.readonly(this.classmap),t.storeItem=e=>this.storeItem(t,e),t.removeItem=e=>this.removeItem(t,e),t.clearItems=()=>this.clearItems(t),t.getItem=(e,n)=>this.getItem(t,e,n),t.fetchItem=(e,n)=>this.fetchItem(t,e,n),t.fetchCollection=(e,n)=>this.fetchCollection(t,e,n),t.createItem=(e,n)=>this.createItem(t,e,n),t.updateItem=(e,n)=>this.updateItem(t,e,n),t.upsertItem=(e,n)=>this.upsertItem(t,e,n),t.deleteItem=(e,n)=>this.deleteItem(t,e,n),t.getRelation=(e,n)=>this.getRelation(t,e,n),t.getRelations=(e,n)=>this.getRelations(t,e,n)}}function Lt(r){if(typeof r=="string")return r;try{return _(r)}catch{return null}}function Ce(r){return r.map(t=>Lt(t))}async function kt(r,t){try{return await t.getItem(r)}catch{return null}}async function Ae(r,t){return Promise.all(r.map(e=>kt(e,t)))}class _e extends K{constructor(t,e=!1){super();$(this,"items",[]);$(this,"multiple");this.items=Array.isArray(t)?t:[t],this.multiple=e}get item(){var t;return(t=this.items[0])!=null?t:null}set item(t){this.items=[t],this.multiple=!1}normalize(){return this.multiple||this.items.length>1?Ce(this.items):Lt(this.item)}static async denormalize(t,{store:e,multiple:n}){return Array.isArray(t)?new this(await Ae(t),n!=null?n:!0):new this([await kt(t,e)],n!=null?n:!1)}}const Ye={asc:"desc",desc:"asc"};class Ue extends K{constructor(t={}){super();$(this,"order");this.order=t}revert(){var e;const t={};for(const n in this.order){const i=this.order[n];t[n]=(e=Ye[i])!=null?e:i}return this.order=t,this}normalize(){return this.order}static denormalize(t){return typeof t=="object"&&t!=null?new this(t):new this}}class He extends K{constructor(t=null){super();$(this,"value");this.value=t}normalize(){var t;return[void 0,null,""].includes((t=this.value)==null?void 0:t.trim())?null:this.value.trim()}static denormalize(t){return[void 0,null,""].includes(t==null?void 0:t.trim())?new this(null):new this(t.trim())}}class qe extends K{constructor(t=!1){super();$(this,"value");this.value=t}normalize(){return this.value?"true":"false"}static denormalize(t){var e;return[void 0,null,""].includes(t==null?void 0:t.trim())?new this(!1):typeof t=="boolean"?new this(t):new this(["true","on","yes","1"].includes((e=t==null?void 0:t.trim())==null?void 0:e.toLowerCase()))}}class Re{constructor(){$(this,"fields");$(this,"preload")}get headers(){var e,n,i,c,h;const t={};return((n=(e=this.preload)==null?void 0:e.length)!=null?n:0)!==0&&(t.preload=[...new Set(this.preload)].map(m=>`"${m}"`).join(", ")),((c=(i=this.fields)==null?void 0:i.length)!=null?c:0)!==0&&(t.fields=[...new Set([...this.fields,...(h=this.preload)!=null?h:[]])].map(m=>`"${m}"`).join(", ")),t}}function Ne({fields:r,preload:t}={}){return Object.assign(new Re,{fields:r},{preload:t}).headers}a.ApiClient=re,a.ConstraintViolationList=At,a.DateRangeFilter=mt,a.FakeEventSource=Yt,a.FilterCollection=ue,a.HttpError=Ot,a.HydraCollection=_t,a.HydraEndpoint=st,a.HydraEndpoints=zt,a.HydraError=$t,a.HydraPlugin=Ee,a.ItemFilter=_e,a.Mercure=Ht,a.OrderFilter=Ue,a.TextFilter=He,a.TruthyFilter=qe,a.Violation=Ct,a.areSameIris=X,a.checkValidItem=ot,a.containsIri=Et,a.createMercure=Te,a.createStore=fe,a.getId=jt,a.getIds=de,a.getIri=_,a.getIris=le,a.getItemByIri=pt,a.getItemIndexByIri=ye,a.getItemsByType=ge,a.hasIri=at,a.mercureSync=Nt,a.normalizeIris=pe,a.partialItem=$e,a.useEndpoint=he,a.useFilters=ce,a.useFormValidation=ve,a.useItemForm=be,a.useMercure=Ut,a.useMercureSync=Me,a.useStore=gt,a.vulcain=Ne,a.withoutDuplicates=ie,a.withoutIri=me,Object.defineProperty(a,"__esModule",{value:!0}),a[Symbol.toStringTag]="Module"});
