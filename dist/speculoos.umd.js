(function(a,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue"),require("clone-deep"),require("md5"),require("is-empty"),require("vue-router"),require("psr7-js"),require("uuid"),require("mitt"),require("uri-templates"),require("@vueuse/core")):typeof define=="function"&&define.amd?define(["exports","vue","clone-deep","md5","is-empty","vue-router","psr7-js","uuid","mitt","uri-templates","@vueuse/core"],o):(a=typeof globalThis!="undefined"?globalThis:a||self,o(a.Speculoos={},a.Vue,a.clone$1,a.md5,a.empty,a.vueRouter,a.psr7Js,a.uuid,a.mitt,a.uriTemplate,a.core))})(this,function(a,o,W,Qt,Wt,ft,tt,Gt,Kt,Xt,st){"use strict";var Be=Object.defineProperty;var Je=(a,o,W)=>o in a?Be(a,o,{enumerable:!0,configurable:!0,writable:!0,value:W}):a[o]=W;var m=(a,o,W)=>(Je(a,typeof o!="symbol"?o+"":o,W),W);function et(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var bt=et(W),te=et(Qt),N=et(Wt),ee=et(Kt),re=et(Xt);class wt extends Error{constructor(t){super(t.statusText),this.response=t,this.statusCode=parseInt(this.response.status)}isStatusCode(t){const e=r=>parseInt(r)===this.statusCode;for(let r of arguments)if(e(r))return!0;return!1}isClientError(){return this.statusCode>=400&&this.statusCode<500}isServerError(){return this.statusCode>500}static guard(t){if(t.status>=400)throw new this(t);return t}}const lt=n=>{if(!(n instanceof Headers))return n;const t={};for(let e of n.keys())t[e]=n.get(e);return t},ne={Accept:"application/ld+json, application/json"},St=async n=>{try{const t=await n.text();try{n.data=JSON.parse(t),n.json=()=>new Promise(e=>e(n.data))}catch{n.data=t,n.json=()=>new Promise(r=>r(n.data))}}catch{}return n};class ie{constructor({baseUri:t="",options:e={},fetcher:r=window.fetch.bind(window)}={}){m(this,"baseUri");m(this,"options");m(this,"fetch");this.baseUri=t,this.options=e,this.fetch=async(i,s)=>r(i,s).then(St)}resolve(t){return new URL(t,this.baseUri).toString()}mergeOptions(t){let e={...this.options};Object.keys(e).includes("headers")&&(e.headers=lt(e.headers));for(let r of arguments){let i={...r};Object.keys(i).includes("headers")&&(i.headers={...lt(i.headers)}),e={...bt.default(e),...bt.default(i)}}return e}async request(t,e,r){e=`${o.unref(e)}`,r=this.mergeOptions({method:t},r),Object.keys(r).includes("headers")&&(r.headers=new Headers({...ne,...lt(r.headers)}));try{o.isRef(r==null?void 0:r.isLoading)&&(r.isLoading.value=!0);const i=await this.fetch(e,r);return wt.guard(i)}finally{o.isRef(r==null?void 0:r.isLoading)&&(r.isLoading.value=!1)}}async get(t,e={}){return await this.request("GET",this.resolve(t),this.mergeOptions(e))}async post(t,e,r={}){return await this.request("POST",this.resolve(t),this.mergeOptions({body:JSON.stringify(o.unref(e)),headers:{"Content-Type":"application/json"}},r))}async put(t,e,r={}){return await this.request("PUT",this.resolve(t),this.mergeOptions({body:JSON.stringify(o.unref(e)),headers:{"Content-Type":"application/json"}},r))}async delete(t,e={}){return await this.request("DELETE",this.resolve(t),this.mergeOptions(e))}}class se{constructor(t=window.fetch.bind(window)){m(this,"fetch");m(this,"pendingRequests",[]);return this.fetch=t,(e,r)=>{try{const i=te.default(JSON.stringify({url:e,...r})),s=this.pendingRequests.findIndex(d=>i===d.hash);if(s>=0)return this.pendingRequests[s].promise;const f=this.fetch(e,r).then(St);return this.pendingRequests.push({hash:i,promise:f}),f.then(d=>(this.removePendingRequest(i),d),d=>{throw this.removePendingRequest(i),d})}catch{return this.fetch(e,r)}}}removePendingRequest(t){const e=this.pendingRequests.findIndex(r=>t===r.hash);e>=0&&this.pendingRequests.splice(e,1)}}function ae(n=void 0){return new se(n)}const G=(n,t=!0,e=[])=>{if(typeof n!="object"||n==null)return n;const r=e.find(s=>s.orig===n);if(r!=null)return r.cloned;let i=Object.assign(Object.create(Object.getPrototypeOf(n)),n);if(Array.isArray(n)&&(i=Object.values(i)),e.push({orig:n,cloned:i}),t)for(const s in i)typeof i[s]=="object"&&i[s]!=null&&(i[s]=G(i[s],t,e));return"__clone"in i&&typeof i.__clone=="function"&&i.__clone(),i};class V{normalize(){throw Error("This method is meant to be overriden.")}async denormalize(t){throw Error("This method is meant to be overriden.")}}class oe extends V{constructor(e=[]){super();m(this,"values");this.values=e}normalize(){return this.values}async denormalize(e){if(typeof e=="string"&&(e=e.trim()),[void 0,null,""].includes(e)){this.values=[];return}Array.isArray(e)||(e=[e]),this.values=e}}var ht=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Tt={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(ht,function(){var e=1e3,r=6e4,i=36e5,s="millisecond",f="second",d="minute",y="hour",b="day",E="week",A="month",D="quarter",O="year",I="date",l="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function(v,h,u){var g=String(v);return!g||g.length>=h?v:""+Array(h+1-g.length).join(u)+v},q={s:P,z:function(v){var h=-v.utcOffset(),u=Math.abs(h),g=Math.floor(u/60),c=u%60;return(h<=0?"+":"-")+P(g,2,"0")+":"+P(c,2,"0")},m:function v(h,u){if(h.date()<u.date())return-v(u,h);var g=12*(u.year()-h.year())+(u.month()-h.month()),c=h.clone().add(g,A),$=u-c<0,p=h.clone().add(g+($?-1:1),A);return+(-(g+(u-c)/($?c-p:p-c))||0)},a:function(v){return v<0?Math.ceil(v)||0:Math.floor(v)},p:function(v){return{M:A,y:O,w:E,d:b,D:I,h:y,m:d,s:f,ms:s,Q:D}[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(v){return v===void 0}},j="en",F={};F[j]=M;var x=function(v){return v instanceof B},k=function v(h,u,g){var c;if(!h)return j;if(typeof h=="string"){var $=h.toLowerCase();F[$]&&(c=$),u&&(F[$]=u,c=$);var p=h.split("-");if(!c&&p.length>1)return v(p[0])}else{var S=h.name;F[S]=h,c=S}return!g&&c&&(j=c),c||!g&&j},z=function(v,h){if(x(v))return v.clone();var u=typeof h=="object"?h:{};return u.date=v,u.args=arguments,new B(u)},w=q;w.l=k,w.i=x,w.w=function(v,h){return z(v,{locale:h.$L,utc:h.$u,x:h.$x,$offset:h.$offset})};var B=function(){function v(u){this.$L=k(u.locale,null,!0),this.parse(u)}var h=v.prototype;return h.parse=function(u){this.$d=function(g){var c=g.date,$=g.utc;if(c===null)return new Date(NaN);if(w.u(c))return new Date;if(c instanceof Date)return new Date(c);if(typeof c=="string"&&!/Z$/i.test(c)){var p=c.match(T);if(p){var S=p[2]-1||0,_=(p[7]||"0").substring(0,3);return $?new Date(Date.UTC(p[1],S,p[3]||1,p[4]||0,p[5]||0,p[6]||0,_)):new Date(p[1],S,p[3]||1,p[4]||0,p[5]||0,p[6]||0,_)}}return new Date(c)}(u),this.$x=u.x||{},this.init()},h.init=function(){var u=this.$d;this.$y=u.getFullYear(),this.$M=u.getMonth(),this.$D=u.getDate(),this.$W=u.getDay(),this.$H=u.getHours(),this.$m=u.getMinutes(),this.$s=u.getSeconds(),this.$ms=u.getMilliseconds()},h.$utils=function(){return w},h.isValid=function(){return this.$d.toString()!==l},h.isSame=function(u,g){var c=z(u);return this.startOf(g)<=c&&c<=this.endOf(g)},h.isAfter=function(u,g){return z(u)<this.startOf(g)},h.isBefore=function(u,g){return this.endOf(g)<z(u)},h.$g=function(u,g,c){return w.u(u)?this[g]:this.set(c,u)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(u,g){var c=this,$=!!w.u(g)||g,p=w.p(u),S=function(X,L){var Q=w.w(c.$u?Date.UTC(c.$y,L,X):new Date(c.$y,L,X),c);return $?Q:Q.endOf(b)},_=function(X,L){return w.w(c.toDate()[X].apply(c.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(L)),c)},C=this.$W,H=this.$M,J=this.$D,Z="set"+(this.$u?"UTC":"");switch(p){case O:return $?S(1,0):S(31,11);case A:return $?S(1,H):S(0,H+1);case E:var nt=this.$locale().weekStart||0,it=(C<nt?C+7:C)-nt;return S($?J-it:J+(6-it),H);case b:case I:return _(Z+"Hours",0);case y:return _(Z+"Minutes",1);case d:return _(Z+"Seconds",2);case f:return _(Z+"Milliseconds",3);default:return this.clone()}},h.endOf=function(u){return this.startOf(u,!1)},h.$set=function(u,g){var c,$=w.p(u),p="set"+(this.$u?"UTC":""),S=(c={},c[b]=p+"Date",c[I]=p+"Date",c[A]=p+"Month",c[O]=p+"FullYear",c[y]=p+"Hours",c[d]=p+"Minutes",c[f]=p+"Seconds",c[s]=p+"Milliseconds",c)[$],_=$===b?this.$D+(g-this.$W):g;if($===A||$===O){var C=this.clone().set(I,1);C.$d[S](_),C.init(),this.$d=C.set(I,Math.min(this.$D,C.daysInMonth())).$d}else S&&this.$d[S](_);return this.init(),this},h.set=function(u,g){return this.clone().$set(u,g)},h.get=function(u){return this[w.p(u)]()},h.add=function(u,g){var c,$=this;u=Number(u);var p=w.p(g),S=function(H){var J=z($);return w.w(J.date(J.date()+Math.round(H*u)),$)};if(p===A)return this.set(A,this.$M+u);if(p===O)return this.set(O,this.$y+u);if(p===b)return S(1);if(p===E)return S(7);var _=(c={},c[d]=r,c[y]=i,c[f]=e,c)[p]||1,C=this.$d.getTime()+u*_;return w.w(C,this)},h.subtract=function(u,g){return this.add(-1*u,g)},h.format=function(u){var g=this,c=this.$locale();if(!this.isValid())return c.invalidDate||l;var $=u||"YYYY-MM-DDTHH:mm:ssZ",p=w.z(this),S=this.$H,_=this.$m,C=this.$M,H=c.weekdays,J=c.months,Z=function(L,Q,vt,ct){return L&&(L[Q]||L(g,$))||vt[Q].slice(0,ct)},nt=function(L){return w.s(S%12||12,L,"0")},it=c.meridiem||function(L,Q,vt){var ct=L<12?"AM":"PM";return vt?ct.toLowerCase():ct},X={YY:String(this.$y).slice(-2),YYYY:this.$y,M:C+1,MM:w.s(C+1,2,"0"),MMM:Z(c.monthsShort,C,J,3),MMMM:Z(J,C),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:Z(c.weekdaysMin,this.$W,H,2),ddd:Z(c.weekdaysShort,this.$W,H,3),dddd:H[this.$W],H:String(S),HH:w.s(S,2,"0"),h:nt(1),hh:nt(2),a:it(S,_,!0),A:it(S,_,!1),m:String(_),mm:w.s(_,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:p};return $.replace(U,function(L,Q){return Q||X[L]||p.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(u,g,c){var $,p=w.p(g),S=z(u),_=(S.utcOffset()-this.utcOffset())*r,C=this-S,H=w.m(this,S);return H=($={},$[O]=H/12,$[A]=H,$[D]=H/3,$[E]=(C-_)/6048e5,$[b]=(C-_)/864e5,$[y]=C/i,$[d]=C/r,$[f]=C/e,$)[p]||C,c?H:w.a(H)},h.daysInMonth=function(){return this.endOf(A).$D},h.$locale=function(){return F[this.$L]},h.locale=function(u,g){if(!u)return this.$L;var c=this.clone(),$=k(u,g,!0);return $&&(c.$L=$),c},h.clone=function(){return w.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},v}(),Jt=B.prototype;return z.prototype=Jt,[["$ms",s],["$s",f],["$m",d],["$H",y],["$W",b],["$M",A],["$y",O],["$D",I]].forEach(function(v){Jt[v[1]]=function(h){return this.$g(h,v[0],v[1])}}),z.extend=function(v,h){return v.$i||(v(h,B,z),v.$i=!0),z},z.locale=k,z.isDayjs=x,z.unix=function(v){return z(1e3*v)},z.en=F[j],z.Ls=F,z.p={},z})})(Tt);var R=Tt.exports,zt={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(ht,function(){var e="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,f,d){var y=f.prototype;d.utc=function(l){var T={date:l,utc:!0,args:arguments};return new f(T)},y.utc=function(l){var T=d(this.toDate(),{locale:this.$L,utc:!0});return l?T.add(this.utcOffset(),e):T},y.local=function(){return d(this.toDate(),{locale:this.$L,utc:!1})};var b=y.parse;y.parse=function(l){l.utc&&(this.$u=!0),this.$utils().u(l.$offset)||(this.$offset=l.$offset),b.call(this,l)};var E=y.init;y.init=function(){if(this.$u){var l=this.$d;this.$y=l.getUTCFullYear(),this.$M=l.getUTCMonth(),this.$D=l.getUTCDate(),this.$W=l.getUTCDay(),this.$H=l.getUTCHours(),this.$m=l.getUTCMinutes(),this.$s=l.getUTCSeconds(),this.$ms=l.getUTCMilliseconds()}else E.call(this)};var A=y.utcOffset;y.utcOffset=function(l,T){var U=this.$utils().u;if(U(l))return this.$u?0:U(this.$offset)?A.call(this):this.$offset;if(typeof l=="string"&&(l=function(j){j===void 0&&(j="");var F=j.match(r);if(!F)return null;var x=(""+F[0]).match(i)||["-",0,0],k=x[0],z=60*+x[1]+ +x[2];return z===0?0:k==="+"?z:-z}(l),l===null))return this;var M=Math.abs(l)<=16?60*l:l,P=this;if(T)return P.$offset=M,P.$u=l===0,P;if(l!==0){var q=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(P=this.local().add(M+q,e)).$offset=M,P.$x.$localOffset=q}else P=this.utc();return P};var D=y.format;y.format=function(l){var T=l||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return D.call(this,T)},y.valueOf=function(){var l=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*l},y.isUTC=function(){return!!this.$u},y.toISOString=function(){return this.toDate().toISOString()},y.toString=function(){return this.toDate().toUTCString()};var O=y.toDate;y.toDate=function(l){return l==="s"&&this.$offset?d(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():O.call(this)};var I=y.diff;y.diff=function(l,T,U){if(l&&this.$u===l.$u)return I.call(this,l,T,U);var M=this.local(),P=d(l).local();return I.call(M,P,T,U)}}})})(zt);var It=zt.exports,Dt={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(ht,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,f){var d,y=function(D,O,I){I===void 0&&(I={});var l=new Date(D),T=function(U,M){M===void 0&&(M={});var P=M.timeZoneName||"short",q=U+"|"+P,j=r[q];return j||(j=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:U,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:P}),r[q]=j),j}(O,I);return T.formatToParts(l)},b=function(D,O){for(var I=y(D,O),l=[],T=0;T<I.length;T+=1){var U=I[T],M=U.type,P=U.value,q=e[M];q>=0&&(l[q]=parseInt(P,10))}var j=l[3],F=j===24?0:j,x=l[0]+"-"+l[1]+"-"+l[2]+" "+F+":"+l[4]+":"+l[5]+":000",k=+D;return(f.utc(x).valueOf()-(k-=k%1e3))/6e4},E=s.prototype;E.tz=function(D,O){D===void 0&&(D=d);var I=this.utcOffset(),l=this.toDate(),T=l.toLocaleString("en-US",{timeZone:D}),U=Math.round((l-new Date(T))/1e3/60),M=f(T).$set("millisecond",this.$ms).utcOffset(15*-Math.round(l.getTimezoneOffset()/15)-U,!0);if(O){var P=M.utcOffset();M=M.add(I-P,"minute")}return M.$x.$timezone=D,M},E.offsetName=function(D){var O=this.$x.$timezone||f.tz.guess(),I=y(this.valueOf(),O,{timeZoneName:D}).find(function(l){return l.type.toLowerCase()==="timezonename"});return I&&I.value};var A=E.startOf;E.startOf=function(D,O){if(!this.$x||!this.$x.$timezone)return A.call(this,D,O);var I=f(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return A.call(I,D,O).tz(this.$x.$timezone,!0)},f.tz=function(D,O,I){var l=I&&O,T=I||O||d,U=b(+f(),T);if(typeof D!="string")return f(D).tz(T);var M=function(F,x,k){var z=F-60*x*1e3,w=b(z,k);if(x===w)return[z,x];var B=b(z-=60*(w-x)*1e3,k);return w===B?[z,w]:[F-60*Math.min(w,B)*1e3,Math.max(w,B)]}(f.utc(D,l).valueOf(),U,T),P=M[0],q=M[1],j=f(P).utcOffset(q);return j.$x.$timezone=T,j},f.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},f.tz.setDefault=function(D){d=D}}})})(Dt);var Ot=Dt.exports;R.extend(It),R.extend(Ot);class Mt extends V{constructor({after:e=null,before:r=null}={},{withTime:i=!0,useUserTimezone:s=!0}={}){super();m(this,"after");m(this,"before");m(this,"normalizedFormat");m(this,"useUserTimezone");this.after=e,this.before=r,this.normalizedFormat=i?"YYYY-MM-DD[T]HH:mm:ss[Z]":"YYYY-MM-DD",this.useUserTimezone=s}normalize(){this.constructor.ensureTimezoneIsSet();const e=this.useUserTimezone?this.constructor.userTimezone:"UTC";let r=null,i=null;return N.default(this.after)||(r=R.tz(this.after,e).hour(0).minute(0).second(0).tz("UTC").format(this.normalizedFormat)),N.default(this.before)||(i=R.tz(this.before,e).hour(0).minute(0).second(0).add(1,"day").subtract(1,"second").tz("UTC").format(this.normalizedFormat)),{after:r,before:i}}async denormalize(e){this.constructor.ensureTimezoneIsSet(),this.after=null,this.before=null,N.default(e.after)||(this.after=this.useUserTimezone?R.tz(e.after,"UTC").tz(this.constructor.userTimezone):R.tz(e.after,"UTC"),this.after=this.after.hour(0).minute(0).second(0).format("YYYY-MM-DD")),N.default(e.before)||(this.before=this.useUserTimezone?R.tz(e.before,"UTC").tz(this.constructor.userTimezone):R.tz(e.before,"UTC"),this.before=this.before.hour(0).minute(0).second(0).add(1,"day").subtract(1,"second").format("YYYY-MM-DD"))}static ensureTimezoneIsSet(){var e;this.constructor.userTimezone=(e=this.constructor.userTimezone)!=null?e:R.tz.guess()||"UTC"}}m(Mt,"userTimezone"),R.extend(It),R.extend(Ot);class Pt extends V{constructor({after:e=null,before:r=null}={}){super();m(this,"after");m(this,"before");this.after=e,this.before=r}normalize(){this.constructor.ensureTimezoneIsSet();let e=null,r=null;return N.default(this.after)||(e=R.tz(this.after,this.constructor.userTimezone).tz("UTC").format("YYYY-MM-DD[T]HH:mm:ss[Z]")),N.default(this.before)||(r=R.tz(this.before,this.constructor.userTimezone).tz("UTC").format("YYYY-MM-DD[T]HH:mm:ss[Z]")),{after:e,before:r}}async denormalize(e){this.constructor.ensureTimezoneIsSet(),this.after=null,this.before=null,N.default(e.after)||(this.after=R.tz(e.after,"UTC").tz(this.constructor.userTimezone).format("YYYY-MM-DD[T]HH:mm:ss[Z]")),N.default(e.before)||(this.before=R.tz(e.before,"UTC").tz(this.constructor.userTimezone).format("YYYY-MM-DD[T]HH:mm:ss[Z]"))}static ensureTimezoneIsSet(){var e;this.constructor.userTimezone=(e=this.constructor.userTimezone)!=null?e:R.tz.guess()||"UTC"}}m(Pt,"userTimezone");function ue(n){return n==null?!0:typeof n=="string"?n.trim().length===0:typeof n=="function"||Array.isArray(n)?n.length===0:n instanceof Object?Object.keys(n).length===0:!1}function dt(n){if(!(n instanceof Object))return n;if(Array.isArray(n))return n.map(dt);const t={...n};return Object.keys(t).forEach(e=>{t[e]instanceof Object&&(t[e]=dt(t[e])),ue(t[e])&&delete t[e]}),t}class ce{constructor(t={}){m(this,"_filters",[]);if(!(t instanceof Object))throw Error("A FilterCollection expects an object.");Object.keys(t).forEach(e=>{if(!(t[e]instanceof V))throw Error(`Filter ${e} doesn't extend the Filter class.`);this[e]=t[e],this._filters.push(e)})}normalize(){const t={};return this._filters.forEach(e=>{const r=this[e];t[e]=r.normalize()}),dt(t)}async denormalize(t){const e=[];for(const r of this._filters){const i=this[r];i instanceof V&&typeof t[r]!="undefined"&&e.push(i.denormalize(t[r]))}return e.length>0&&await Promise.all(e),this}}async function fe(n={},t={preserveQuery:!1,targetRoute:void 0}){if(typeof n!="function")throw Error("initialState should be provided as a function.");const e=ft.useRoute(),r=ft.useRouter(),i=o.ref(n());async function s(b){Object.assign(o.unref(i),await o.unref(i).denormalize(b.query))}function f(){i.value=G(n())}function d(b={}){const E={};return t.preserveQuery===!0&&Object.assign(E,e.query),Object.assign(E,o.unref(i).normalize(),b)}async function y(b={}){var A;const E=(A=o.unref(t.targetRoute))!=null?A:e;await r.push(Object.assign({...E},{query:d(b)}))}return ft.onBeforeRouteUpdate(b=>s(b)),await s(e),{filters:i,buildQueryParams:d,submit:y,clear:f}}const le=async({state:n={},methods:t={},name:e="store"}={})=>{n=o.reactive(n);const r=[],i={name:e,state:n,...Object.keys(t).reduce(function(s,f){const d=t[f];return s[f]=function(){return d(n,...arguments)},s},{}),async use(s){return r.push(s),await s.install(this),this},async reconciliate(s=!1){const f=r.filter(({reconciliate:d})=>typeof d=="function");if(s===!1)return Promise.all(f.map(d=>d.reconciliate(this)));for(const d of f)await d.reconciliate(this)}};return i.install=s=>s.provide(e,{...i,state:o.readonly(n)}),i},mt=(n="store")=>o.inject(n);class Ct{constructor(t){Object.keys(t).forEach(e=>{this[e]=new at(t[e])})}for(t){if(typeof t=="string"&&Object.keys(this).includes(t))return this[t];if(!Object.keys(this).includes(t["@type"]))throw Error(`Endpoint not found for item ${t["@type"]}.`);return this[t["@type"]]}}class at{constructor(t){m(this,"endpoint");this.endpoint=t}toString(){return this.endpoint}toJSON(){return this.endpoint}buildIri(t){let e=new tt.URI(this.endpoint);return e=e.withPath(`${e.getPath()}/${t}`),e.toString()}withQuery(t){const e=new tt.URI(this.endpoint),r=new tt.QueryString(e).withParams(t);return new at(e.withQuery(r.toString()).toString())}paginated(t,e=!1){t=o.unref(t),e=o.unref(e);const r={pagination:t===!1?0:1,partial:e===!1?void 0:1,itemsPerPage:void 0};return t&&(r.itemsPerPage=t),this.withQuery(r)}synchronize(t=window.location.href){return this.withQuery(new tt.QueryString(new tt.URI(t)).getParams())}}const he=(n,t)=>mt(t).state.endpoints[n];function rt(n){return n=o.unref(n),n==null?!1:Object.keys(n).includes("@id")&&n["@id"]!=null}function Y(n){return n=o.unref(n),n===null?null:typeof n=="string"?n:(ot(n),n["@id"])}function Et(n){const t=Y(n);return t.substring(t.lastIndexOf("/")+1)}function de(n){return n.map(Y)}function me(n){return n.map(Et)}function ot(n,t=null){if(typeof n!="object"||!("@id"in n))throw Error("Invalid item.");if(t!==null){if(typeof t=="string"&&t!==n["@type"])throw Error(`Expected item of type "${t}", got "${n["@type"]}".`);if(Array.isArray(t)&&t.includes(n["@type"])===!1)throw Error(`Expected item of any "${t.join("|")}", got "${n["@type"]}".`)}}function K(n,t){return Y(n)===Y(t)}function jt(n,t){if(n=o.unref(n),n=Array.from(n).map(o.unref),t=o.unref(t),Array.isArray(t)){const e=t;for(const r of e)if(jt(n,r))return!0;return!1}for(const e of n)if(K(e,t))return!0;return!1}function ye(n,t){const e=n.findIndex(r=>K(r,t));return e>=0&&n.splice(e,1),n}function ut(n,t){const e=n.find(r=>K(r,t));return typeof e=="undefined"?null:e}function ge(n,t){return n.findIndex(e=>K(e,t))}function pe(n,t){return n.filter(e=>e["@type"]===t)}function $e(n){Object.assign(n,n.map(t=>Y(t)))}function ve(n,t){return n=o.unref(n),ot(n),Object.assign({"@id":n["@id"],"@type":n["@type"]},t)}class yt extends Error{constructor(){super(...arguments);m(this,"statusCode")}get title(){return this["hydra:title"]}get description(){return this["hydra:description"]}}class _t{constructor(){m(this,"id");m(this,"propertyPath");m(this,"message");m(this,"code");this.id=Gt.v4()}}class At extends yt{constructor(e){super();m(this,"_violations",[]);Object.assign(this,{*[Symbol.iterator](){yield*this.violations}}),Object.assign(this,e)}get violations(){return this._violations}set violations(e){this._violations=e.map(r=>Object.assign(new _t,r))}getPropertyPaths(){return[...new Set(this.violations.map(({propertyPath:e})=>e))]}getViolations(e){const r=Array.from(arguments);return r.length===0?this.violations:N.default(r[0])?this.violations.filter(i=>N.default(i.propertyPath)):this.violations.filter(i=>e===i.propertyPath)}}class Yt{constructor(t={}){Object.assign(this,{...t,*[Symbol.iterator](){yield*this["hydra:member"]||[]}})}get length(){return this.items.length}get totalItems(){return this["hydra:totalItems"]||0}get items(){return this["hydra:member"]||[]}forEach(t){return(this["hydra:member"]||[]).forEach(t)}map(t){return(this["hydra:member"]||[]).map(t)}filter(t){return(this["hydra:member"]||[]).filter(t)}find(t){return(this["hydra:member"]||[]).find(t)}findIndex(t){return(this["hydra:member"]||[]).findIndex(t)}}function be(n){if(typeof n!="object"||n==null)throw Error("Invalid object.");return Object.keys(n).forEach(t=>delete n[t]),n}function Ut(n){return rt(n)?Y(n):n}function Rt(n){const t=G(n),e=Object.keys(t);for(const r of e){const i=t[r];Array.isArray(i)?t[r]=i.map(s=>Ut(s)):typeof i=="object"&&i!=null&&(t[r]=Ut(i))}return t}function gt(n,t){return n=be(n),Object.assign(n,t)}function we(n){const t=mt(),e=o.ref(o.unref(n)),r=o.reactive(G(o.unref(n))),i=o.computed(()=>!rt(o.unref(r))),s=o.ref(!1);o.watch(e,b=>gt(r,b));const f=o.computed(()=>JSON.stringify(o.unref(r))!==JSON.stringify(o.unref(e)));return{item:r,isUnsavedDraft:f,isCreationMode:i,isSubmitting:s,reset:b=>gt(r,G(o.unref(b!=null?b:n))),submit:async b=>{o.isRef(b)&&(b=o.unref(b));try{s.value=!0;const E=await t.upsertItem(Rt(b!=null?b:r));return e.value=E,gt(r,G(E)),E}finally{s.value=!1}}}}function Se(){const n=i=>{i=o.unref(i),i.querySelectorAll("[name]").forEach(function(s){s.setCustomValidity("")})},t=(i,s=!0)=>{i=o.unref(i);const f=i.checkValidity();return!f&&s&&i.reportValidity(),f},e=(i,s)=>{n(i),Array.from(s).forEach(f=>r(i,f)),t(i)},r=(i,{propertyPath:s,message:f})=>{var d;i=o.unref(i),(d=i.querySelector(`[name='${s}']`))==null||d.setCustomValidity(f)};return{resetValidity:n,bindViolations:e,validate:t}}let pt;const Te=1,ze=2;class Ht{constructor(t,e){m(this,"readyState",Te);m(this,"url");m(this,"withCredentials");var r;this.url=t,this.withCredentials=(r=e==null?void 0:e.withCredentials)!=null?r:!1,setTimeout(()=>this.onopen(),10)}onerror(){}onmessage(){}onopen(){}close(){this.readyState=ze}triggerEvent(t){this.onmessage(t)}triggerError(t){this.onerror(t)}}(()=>{var n;return typeof process!="undefined"&&((n=process==null?void 0:process.env)==null?void 0:n.NODE_ENV)==="test"||"test"===void 0})()?pt=Ht:pt=window.EventSource;var Ie=pt;const De=(n,t)=>{const e=new xt(n,t);return Object.assign(e,{install(r){r.provide("mercure",e)}})},Ft=()=>o.inject("mercure");function Oe(n,t){return n.length===t.length&&n.every(e=>t.includes(e))}class xt{constructor(t,e={}){m(this,"hub");m(this,"options");m(this,"connection");m(this,"subscribedTopics");m(this,"endpoint");m(this,"emitter");m(this,"lastEventId");Object.assign(this,{hub:t,options:o.reactive(e)}),this.lastEventId=o.ref(),this.subscribedTopics=o.ref([]),this.endpoint=o.computed(()=>{const r=new URL(this.hub),i=o.unref(this.subscribedTopics);return i.includes("*")?r.searchParams.append("topic","*"):i.forEach(s=>r.searchParams.append("topic",s)),o.unref(this.lastEventId)&&r.searchParams.append("Last-Event-ID",o.unref(this.lastEventId)),r.toString()}),this.emitter=ee.default()}subscribe(t=["*"],e=!0){Array.isArray(t)||(t=[t]);const r=Array.from(o.unref(this.subscribedTopics)),i=[...new Set([...o.unref(this.subscribedTopics),...t])];this.subscribedTopics.value=i,e&&!Oe(r,i)&&this.listen()}unsubscribe(t){Array.isArray(t)||(t=[t]),this.subscribedTopics.value=this.subscribedTopics.value.filter(e=>!t.includes(e)),this.connection&&this.listen()}addListener(t){return this.emitter.on("message",t)}removeListener(t){return this.emitter.off("message",t)}listen(){if(o.unref(this.subscribedTopics).length===0){this.stop();return}this.connection||this.connect()}connect(){this.stop(),this.connection=new Ie(o.unref(this.endpoint),this.options),this.connection.onopen=()=>this.emitter.emit("open",{endpoint:o.unref(this.endpoint)}),this.connection.onmessage=t=>(this.lastEventId.value=t.lastEventId,this.emitter.emit("message",t)),this.connection.onerror=t=>{this.emitter.emit("error",t),typeof this.options.reconnectInterval=="number"&&(this.stop(),setTimeout(()=>this.connect(),this.options.reconnectInterval))}}stop(){var t;(t=this.connection)==null||t.close(),this.connection=void 0}}const Lt=(n,t)=>Object.assign(t,n),qt=()=>{};function kt(n,t,e=["*"],r=Lt,i=qt){Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);const s=f=>{try{const d=JSON.parse(f.data);if(!rt(d))return;if(Object.keys(d).length===1){i(Y(d));return}for(const y of t)K(Y(d),y)&&r(d,o.unref(y))}catch(d){console.debug(d)}};return n.addListener(s),n.subscribe(e),s}const Nt=(n,t,e)=>{Array.isArray(t)||(t=[t]);const r=i=>{try{const s=JSON.parse(i.data);for(const f of t)if(typeof re.default(f).fromUri(Y(s))!="undefined"){e(s);break}}catch{}};return n.addListener(r),n.subscribe(t),r},Me=n=>{n=n!=null?n:Ft();const t=[];return o.onUnmounted(()=>{for(const r of t)n.removeListener(r)}),{synchronize:(r,i=["*"],s=Lt,f=qt)=>{t.push(kt(n,r,i,s,f))},on(r,i){const s=Nt(n,r,i);return t.push(s),s}}},Pe={"hydra:Collection":Yt,"hydra:Error":yt,ConstraintViolationList:At};class Vt{constructor(){Object.assign(this,{*[Symbol.iterator](){yield*Object.values(this)}})}get length(){return Array.from(this).length}forEach(t){return Array.from(this).forEach(t)}map(t){return Array.from(this).map(t)}filter(t){return Array.from(this).filter(t)}find(t){return Array.from(this).find(t)}findIndex(t){return Array.from(this).findIndex(t)}}const Ce=function(n){throw n};class Ee{constructor(t,e={}){m(this,"api");m(this,"endpoints");m(this,"classmap");var s;this.api=t;const{endpoints:r,classmap:i}=e;this.endpoints=new Ct(r!=null?r:{}),this.classmap={...Pe,...i},this.errorHandler=(s=e.errorHandler)!=null?s:Ce}factory(t,e){var r;for(const i in this.classmap)if(i===((r=t["@type"])!=null?r:t)){const s=this.classmap[i];return t instanceof s?t:(t=Object.assign(new s,t),e&&Object.assign(t,{statusCode:e}),o.reactive(t))}return t}storeItem({state:t},e){const r=Y(e);return Object.keys(t.items).includes(r)?Object.assign(t.items[r],e):t.items[r]=o.ref(e),t.items[r]}removeItem({state:t},e){const r=Y(e);delete t.items[r]}async clearItems({state:t}){t.items=o.reactive(new Vt)}async handle(t,{errorHandler:e=this.errorHandler}={}){var r,i,s,f,d;try{const{data:y}=await t();return this.factory(y)}catch(y){typeof((r=y.response)==null?void 0:r.data)=="object"&&((i=y.response)==null?void 0:i.data)!=null&&(y=this.factory(y.response.data,(s=y.response)==null?void 0:s.status)),y.statusCode=(d=y.statusCode)!=null?d:(f=y.response)==null?void 0:f.status,e(y)}}async fetchItem({state:t},e,r){const i=Y(e),s=await this.handle(()=>this.api.get(i,r),r);return this.storeItem({state:t},this.factory(s))}async getItem({state:t},e,r){if(e===null)return null;const i=Y(e),s=ut(t.items,i);return s!=null?s:await this.fetchItem({state:t},i,r)}async fetchCollection({state:t},e,r){const i=await this.handle(()=>this.api.get(e,r),r);i["hydra:member"]=i["hydra:member"].map(f=>this.factory(f));const s=this.factory(i);return s["hydra:member"]=s["hydra:member"].map(f=>this.factory(f)),s}async createItem({state:t},e,r){const i=this.endpoints.for(e);return e=await this.handle(()=>this.api.post(i,e,r),r),this.storeItem({state:t},e)}async updateItem({state:t},e,r){return ot(e),e=await this.handle(()=>this.api.put(Y(e),e,r),r),this.storeItem({state:t},e)}async upsertItem({state:t},e,r){return rt(e)?this.updateItem({state:t},e,r):this.createItem({state:t},e,r)}async deleteItem({state:t},e,r){const i=Y(e);await this.handle(()=>this.api.delete(i,r),r),e=ut(t.items,i),e!==null&&this.removeItem({state:t},e)}async getRelation({state:t},e,r={}){var i,s;if(e===null)return null;if(typeof e=="function"){const f=st.asyncComputed(()=>this.getRelation({state:t},e(),r));return await st.until(f).not.toBe(void 0),f}if(((i=r.useExisting)!=null?i:!0)===!0){const f=ut(t.items,e);if(f!=null)return f}return typeof e=="object"&&((s=r.force)!=null?s:!1)===!1?e:await this.getItem({state:t},e,r)}async getRelations({state:t},e,r){if(typeof e=="function"){const i=st.asyncComputed(()=>this.getRelations({state:t},e(),r));return await st.until(i).not.toBe(void 0),i}return Promise.all(e.map(i=>this.getRelation({state:t},i,r)))}async install(t){t.state.items=o.reactive(new Vt),t.state.endpoints=o.readonly(this.endpoints),t.state.classmap=o.readonly(this.classmap),t.storeItem=e=>this.storeItem(t,e),t.removeItem=e=>this.removeItem(t,e),t.clearItems=()=>this.clearItems(t),t.getItem=(e,r)=>this.getItem(t,e,r),t.fetchItem=(e,r)=>this.fetchItem(t,e,r),t.fetchCollection=(e,r)=>this.fetchCollection(t,e,r),t.createItem=(e,r)=>this.createItem(t,e,r),t.updateItem=(e,r)=>this.updateItem(t,e,r),t.upsertItem=(e,r)=>this.upsertItem(t,e,r),t.deleteItem=(e,r)=>this.deleteItem(t,e,r),t.getRelation=(e,r)=>this.getRelation(t,e,r),t.getRelations=(e,r)=>this.getRelations(t,e,r),t.endpoint=e=>t.state.endpoints[e],t.getItemsByType=e=>t.state.items.filter(r=>e===r["@type"]),t.factory=(e,r)=>(r=r!=null?r:e,typeof e=="string"&&(r["@type"]=e),this.factory(r))}}function Zt(n){if(typeof n=="string")return n;try{return Y(n)}catch{return null}}function je(n){return n.map(t=>Zt(t))}async function Bt(n,t){try{return await t.getItem(n)}catch{return null}}async function _e(n,t){return Promise.all(n.map(e=>Bt(e,t)))}class Ae extends V{constructor(e,{store:r,multiple:i=!1}){super();m(this,"items",[]);m(this,"multiple");m(this,"store");this.items=Array.isArray(e)?e:[e],this.store=r,this.multiple=i}get item(){var e;return(e=this.items[0])!=null?e:null}set item(e){this.items=[e],this.multiple=!1}normalize(){return this.multiple||this.items.length>1?je(this.items):Zt(this.item)}async denormalize(e){if(Array.isArray(e)){this.items=await _e(e,this.store);return}this.items=[await Bt(e,this.store)]}}const Ye={asc:"desc",desc:"asc"};class Ue extends V{constructor(e={}){super();m(this,"order");this.order=e}revert(){var r;const e={};for(const i in this.order){const s=this.order[i];e[i]=(r=Ye[s])!=null?r:s}return this.order=e,this}normalize(){return this.order}async denormalize(e){this.order={},typeof e=="object"&&e!=null&&(this.order=e)}}class Re extends V{constructor(t,e,r=!0,i=!0){super(),this.left=t,this.right=e,this.includeLeft=r,this.includeRight=i}normalize(){const t={};return this.left!=null&&(t[this.includeLeft?"gte":"gt"]=`${this.left}`),this.right!=null&&(t[this.includeRight?"lte":"lt"]=`${this.right}`),Object.keys(t).length>0?t:void 0}async denormalize(t){t==null||typeof t!="object"||(Object.keys(t).includes("gt")&&(this.left=parseFloat(t.gt),this.includeLeft=!1),Object.keys(t).includes("gte")&&(this.left=parseFloat(t.gte),this.includeLeft=!0),Object.keys(t).includes("lt")&&(this.right=parseFloat(t.lt),this.includeRight=!1),Object.keys(t).includes("lte")&&(this.right=parseFloat(t.lte),this.includeRight=!0))}}class He extends V{constructor(e=null){super();m(this,"_value");this.value=e}get value(){return this._value}set value(e){this._value=e&&e.toString()}normalize(){var e;return[void 0,null,""].includes((e=this.value)==null?void 0:e.trim())?null:this.value.trim()}async denormalize(e){if(typeof e=="string"&&(e=e.trim()),[void 0,null,""].includes(e)){this.value=null;return}this.value=e}}class Fe extends V{constructor(e=null){super();m(this,"value");this.value=e}normalize(){return this.value==null?null:this.value?"true":"false"}async denormalize(e){if(e==null){this.value=null;return}e=`${e}`.trim(),this.value=["true","on","yes","1"].includes(e.toLowerCase())}}function xe({itemsPerPage:n,currentPage:t,totalItems:e}){return e==null?new ke({itemsPerPage:n,currentPage:t}):new qe({itemsPerPage:n,currentPage:t,totalItems:e})}function Le(n){return Array.from({length:n},(t,e)=>e+1)}class $t{constructor({itemsPerPage:t,currentPage:e}){m(this,"itemsPerPage");m(this,"totalItems");m(this,"currentPage");m(this,"previousPage");m(this,"nextPage");m(this,"lastPage");m(this,"offset");m(this,"_pages");this.itemsPerPage=parseInt(t),this.currentPage=parseInt(e),this.offset=Math.max(0,e*t-t),this.previousPage=Math.max(1,this.currentPage-1)}get pages(){return this._pages===void 0&&(this._pages=Le(this.lastPage)),this._pages}isPartial(){return this.totalItems==null}isFirstPage(t=void 0){return parseInt(t!=null?t:this.currentPage)===1}isPreviousPage(t){return parseInt(t)===this.previousPage}isCurrentPage(t){return parseInt(t)===this.currentPage}isNextPage(t){return parseInt(t)===this.nextPage}isLastPage(t=void 0){return parseInt(t!=null?t:this.currentPage)===this.lastPage}*[Symbol.iterator](){yield*this.pages}truncate(t,e=!1){return new Ne(this,t,e)}}class qe extends $t{constructor({itemsPerPage:t,currentPage:e,totalItems:r}){super({itemsPerPage:t,currentPage:e}),this.totalItems=parseInt(r),this.lastPage=Math.max(1,Math.ceil(this.totalItems/Math.max(1,this.itemsPerPage))),this.nextPage=Math.min(this.lastPage,this.currentPage+1)}}class ke extends $t{constructor({itemsPerPage:t,currentPage:e,totalItems:r}){super({itemsPerPage:t,currentPage:e,totalItems:r}),this.nextPage=this.lastPage=this.currentPage+1}}class Ne extends $t{constructor(t,e,r=!1){super(t),Object.assign(this,t);const i=[];r&&i.push(1);for(let s=1;s<=this.lastPage;s++)s===this.currentPage&&i.push(s),s<this.currentPage&&s>=this.currentPage-e&&i.push(s),s>this.currentPage&&s<=this.currentPage+e&&i.push(s);r&&i.push(this.lastPage),this._pages=[...new Set(i)]}}class Ve{constructor(){m(this,"fields");m(this,"preload")}get headers(){var e,r,i,s,f;const t={};return((r=(e=this.preload)==null?void 0:e.length)!=null?r:0)!==0&&(t.preload=[...new Set(this.preload)].map(d=>`"${d}"`).join(", ")),((s=(i=this.fields)==null?void 0:i.length)!=null?s:0)!==0&&(t.fields=[...new Set([...this.fields,...(f=this.preload)!=null?f:[]])].map(d=>`"${d}"`).join(", ")),t}}function Ze({fields:n,preload:t}={}){return Object.assign(new Ve,{fields:n},{preload:t}).headers}a.ApiClient=ie,a.ArrayFilter=oe,a.ConstraintViolationList=At,a.DateRangeFilter=Mt,a.DatetimeRangeFilter=Pt,a.FakeEventSource=Ht,a.FilterCollection=ce,a.HttpError=wt,a.HydraCollection=Yt,a.HydraEndpoint=at,a.HydraEndpoints=Ct,a.HydraError=yt,a.HydraPlugin=Ee,a.ItemFilter=Ae,a.Mercure=xt,a.OrderFilter=Ue,a.RangeFilter=Re,a.TextFilter=He,a.TruthyFilter=Fe,a.Violation=_t,a.areSameIris=K,a.checkValidItem=ot,a.clone=G,a.containsIri=jt,a.createMercure=De,a.createPager=xe,a.createStore=le,a.getId=Et,a.getIds=me,a.getIri=Y,a.getIris=de,a.getItemByIri=ut,a.getItemIndexByIri=ge,a.getItemsByType=pe,a.hasIri=rt,a.mercureSync=kt,a.normalizeIris=$e,a.normalizeItemRelations=Rt,a.on=Nt,a.partialItem=ve,a.useEndpoint=he,a.useFilters=fe,a.useFormValidation=Se,a.useItemForm=we,a.useMercure=Ft,a.useMercureSync=Me,a.useStore=mt,a.vulcain=Ze,a.withoutDuplicates=ae,a.withoutIri=ye,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
